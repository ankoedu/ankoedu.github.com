/**
 * flashgallery
 *
 * @version 0.5.4
 * @copyright 2011-2012 Flash-Gallery.com
 */

if(void 0===JSON){var JSON;JSON||(JSON={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){r.lastIndex=0;return r.test(a)?'"'+a.replace(r,function(a){var s=e[a];return"string"===typeof s?s:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,r){var s,g,E,y,c=m,e,C=r[a];C&&"object"===typeof C&&"function"===typeof C.toJSON&&(C=C.toJSON(a));"function"===typeof z&&(C=z.call(r,a,C));switch(typeof C){case "string":return b(C);case "number":return isFinite(C)?""+
C:"null";case "boolean":case "null":return""+C;case "object":if(!C)return"null";m+=k;e=[];if("[object Array]"===Object.prototype.toString.apply(C)){y=C.length;for(s=0;s<y;s+=1)e[s]=d(s,C)||"null";E=0===e.length?"[]":m?"[\n"+m+e.join(",\n"+m)+"\n"+c+"]":"["+e.join(",")+"]";m=c;return E}if(z&&"object"===typeof z){y=z.length;for(s=0;s<y;s+=1)"string"===typeof z[s]&&(g=z[s],(E=d(g,C))&&e.push(b(g)+(m?": ":":")+E))}else for(g in C)Object.prototype.hasOwnProperty.call(C,g)&&(E=d(g,C))&&e.push(b(g)+(m?": ":
":")+E);E=0===e.length?"{}":m?"{\n"+m+e.join(",\n"+m)+"\n"+c+"}":"{"+e.join(",")+"}";m=c;return E}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m,k,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z;if("function"!==typeof JSON.stringify)JSON.stringify=function(a,b,s){var g;k=m="";if("number"===typeof s)for(g=0;g<s;g+=1)k+=" ";else"string"===typeof s&&(k=s);if((z=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",
{"":a})};if("function"!==typeof JSON.parse)JSON.parse=function(a,b){function s(a,g){var r,c,d=a[g];if(d&&"object"===typeof d)for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(c=s(d,r),void 0!==c?d[r]=c:delete d[r]);return b.call(a,g,d)}var g,a=""+a;c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),"function"===typeof b?s({"":g},""):g;throw new SyntaxError("JSON.parse");}})()}
(function(a,b){function d(b,d){var k=b.nodeName.toLowerCase();if("area"===k){var k=b.parentNode,e=k.name;if(!b.href||!e||"map"!==k.nodeName.toLowerCase())return!1;k=a("img[usemap=#"+e+"]")[0];return!!k&&c(k)}return(/input|select|textarea|button|object/.test(k)?!b.disabled:"a"==k?b.href||d:d)&&c(b)}function c(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,d){return"number"===typeof b?this.each(function(){var c=
this;setTimeout(function(){a(c).focus();d&&d.call(c)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(d){if(d!==b)return this.css("zIndex",d);if(this.length)for(var d=a(this[0]),c;d.length&&d[0]!==document;){c=d.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(d.css("zIndex"),10),!isNaN(c)&&0!==c)return c;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(d,c){function k(b,s,g,E){a.each(e,function(){s-=parseFloat(a.curCSS(b,"padding"+this,!0))||0;g&&(s-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0);E&&(s-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return s}var e="Width"===c?["Left","Right"]:["Top","Bottom"],z=c.toLowerCase(),B={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(d){return d===b?B["inner"+c].call(this):this.each(function(){a(this).css(z,k(this,d)+"px")})};a.fn["outer"+c]=function(b,s){return"number"!==typeof b?B["outer"+c].call(this,b):this.each(function(){a(this).css(z,k(this,b,!0,s)+"px")})}}),a.extend(a.expr[":"],{data:function(b,d,c){return!!a.data(b,c[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),k=isNaN(c);
return(k||0<=c)&&d(b,!k)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var b=a.ui[b].prototype,e;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=
0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<b[d])return!0;b[d]=1;e=0<b[d];b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,z,B){return a.ui.isOverAxis(b,d,z)&&a.ui.isOverAxis(c,e,B)}}))})(jQuery);
(function(a,b){if(a.cleanData){var d=a.cleanData;a.cleanData=function(b){for(var c=0,k;null!=(k=b[c]);c++)try{a(k).triggerHandler("remove")}catch(e){}d(b)}}else{var c=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){d||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return c.call(a(this),b,d)})}}a.widget=function(b,c,d){var e=b.split(".")[0],z,b=b.split(".")[1];z=e+"-"+b;if(!d)d=c,c=a.Widget;a.expr[":"][z]=
function(c){return!!a.data(c,b)};a[e]=a[e]||{};a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=a.extend(!0,{},c.options);a[e][b].prototype=a.extend(!0,c,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:z},d);a.widget.bridge(b,a[e][b])};a.widget.bridge=function(c,d){a.fn[c]=function(k){var e="string"===typeof k,z=Array.prototype.slice.call(arguments,1),B=this,k=!e&&z.length?a.extend.apply(null,[!0,k].concat(z)):k;
if(e&&"_"===k.charAt(0))return B;e?this.each(function(){var d=a.data(this,c),s=d&&a.isFunction(d[k])?d[k].apply(d,z):d;if(s!==d&&s!==b)return B=s,!1}):this.each(function(){var b=a.data(this,c);b?b.option(k||{})._init():a.data(this,c,new d(k,this))});return B}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(!0,
{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var k=c;if(0===arguments.length)return a.extend({},this.options);if("string"===typeof c){if(d===b)return this.options[c];k={};k[c]=d}this._setOptions(k);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,z=this.options[b],d=d||{},c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(z)&&!1===z.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(a){var b=!1;a(document).mouseup(function(){b=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,r=1==d.which,m="string"==typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;if(!r||m||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=
!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(b){if(a.browser.msie&&
!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b))(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b);return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b);return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if("original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(b);if(!this.handle)return!1;d.iframeFix&&a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=
this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;
this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
if(!d){var c=this._uiHash();if(!1===this._trigger("drag",b,c))return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));if(this.dropped)d=this.dropped,this.dropped=
!1;if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var c=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){!0===
this.options.iframeFix&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(d=
!0)});return d},_createHelper:function(b){var d=this.options,b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||
0});if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment)b.containment=this.helper[0].parentNode;if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=a(b.containment),d=b[0];if(d){b.offset();var c="hidden"!=a(d).css("overflow");this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),
10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=b}}else if(b.containment.constructor==Array)this.containment=b.containment},_convertPositionTo:function(b,d){if(!d)d=this.position;var c="absolute"==b?1:-1,r="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,m=/(html|body)/i.test(r[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():m?0:r.scrollTop())*c),left:d.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():m?0:r.scrollLeft())*c)}},_generatePosition:function(b){var d=this.options,c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
r=/(html|body)/i.test(c[0].tagName),m=b.pageX,k=b.pageY;if(this.originalPosition){var e;if(this.containment)this.relative_container?(e=this.relative_container.offset(),e=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):e=this.containment,b.pageX-this.offset.click.left<e[0]&&(m=e[0]+this.offset.click.left),b.pageY-this.offset.click.top<e[1]&&(k=e[1]+this.offset.click.top),b.pageX-this.offset.click.left>e[2]&&(m=e[2]+this.offset.click.left),
b.pageY-this.offset.click.top>e[3]&&(k=e[3]+this.offset.click.top);d.grid&&(k=d.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,k=e?!(k-this.offset.click.top<e[1]||k-this.offset.click.top>e[3])?k:!(k-this.offset.click.top<e[1])?k-d.grid[1]:k+d.grid[1]:k,m=d.grid[0]?this.originalPageX+Math.round((m-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,m=e?!(m-this.offset.click.left<e[0]||m-this.offset.click.left>e[2])?m:!(m-this.offset.click.left<
e[0])?m-d.grid[0]:m+d.grid[0]:m)}return{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:c.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,d,c){c=c||this._uiHash();a.ui.plugin.call(this,b,[d,c]);if("drag"==b)this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,b,d,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.18"});
a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var c=a(this).data("draggable"),r=c.options,m=a.extend({},d,{item:c.element});c.sortables=[];a(r.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(c.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",b,m))})},stop:function(b,d){var c=a(this).data("draggable"),r=a.extend({},d,{item:c.element});a.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;c.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,r)})},drag:function(b,d){var c=a(this).data("draggable"),r=this;a.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;
this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=1,this.instance.currentItem=a(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,
!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",b),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c;this.instance.currentItem&&this.instance._mouseDrag(b)}else if(this.instance.isOver)this.instance.isOver=
0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",b),c.dropped=!1})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),d=a(this).data("draggable").options;if(b.css("cursor"))d._cursor=
b.css("cursor");b.css("cursor",d.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){var c=a(d.helper),r=a(this).data("draggable").options;if(c.css("opacity"))r._opacity=c.css("opacity");c.css("opacity",r.opacity)},stop:function(b,d){var c=a(this).data("draggable").options;c._opacity&&a(d.helper).css("opacity",c._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=
a(this).data("draggable");if(b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName)b.overflowOffset=b.scrollParent.offset()},drag:function(b){var d=a(this).data("draggable"),c=d.options,r=!1;if(d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName){if(!c.axis||"x"!=c.axis)if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity)d.scrollParent[0].scrollTop=r=d.scrollParent[0].scrollTop+c.scrollSpeed;else if(b.pageY-d.overflowOffset.top<c.scrollSensitivity)d.scrollParent[0].scrollTop=
r=d.scrollParent[0].scrollTop-c.scrollSpeed;if(!c.axis||"y"!=c.axis)if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity)d.scrollParent[0].scrollLeft=r=d.scrollParent[0].scrollLeft+c.scrollSpeed;else if(b.pageX-d.overflowOffset.left<c.scrollSensitivity)d.scrollParent[0].scrollLeft=r=d.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||"x"!=c.axis)b.pageY-a(document).scrollTop()<c.scrollSensitivity?r=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):
a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(r=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed));if(!c.axis||"y"!=c.axis)b.pageX-a(document).scrollLeft()<c.scrollSensitivity?r=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(r=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))}!1!==r&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});
a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),d=b.options;b.snapElements=[];a(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,d){for(var c=a(this).data("draggable"),r=c.options,m=r.snapTolerance,k=d.offset.left,e=k+c.helperProportions.width,z=d.offset.top,B=z+c.helperProportions.height,
H=c.snapElements.length-1;0<=H;H--){var s=c.snapElements[H].left,g=s+c.snapElements[H].width,E=c.snapElements[H].top,y=E+c.snapElements[H].height;if(s-m<k&&k<g+m&&E-m<z&&z<y+m||s-m<k&&k<g+m&&E-m<B&&B<y+m||s-m<e&&e<g+m&&E-m<z&&z<y+m||s-m<e&&e<g+m&&E-m<B&&B<y+m){if("inner"!=r.snapMode){var q=Math.abs(E-B)<=m,O=Math.abs(y-z)<=m,C=Math.abs(s-e)<=m,P=Math.abs(g-k)<=m;if(q)d.position.top=c._convertPositionTo("relative",{top:E-c.helperProportions.height,left:0}).top-c.margins.top;if(O)d.position.top=c._convertPositionTo("relative",
{top:y,left:0}).top-c.margins.top;if(C)d.position.left=c._convertPositionTo("relative",{top:0,left:s-c.helperProportions.width}).left-c.margins.left;if(P)d.position.left=c._convertPositionTo("relative",{top:0,left:g}).left-c.margins.left}var T=q||O||C||P;if("outer"!=r.snapMode){q=Math.abs(E-z)<=m;O=Math.abs(y-B)<=m;C=Math.abs(s-k)<=m;P=Math.abs(g-e)<=m;if(q)d.position.top=c._convertPositionTo("relative",{top:E,left:0}).top-c.margins.top;if(O)d.position.top=c._convertPositionTo("relative",{top:y-c.helperProportions.height,
left:0}).top-c.margins.top;if(C)d.position.left=c._convertPositionTo("relative",{top:0,left:s}).left-c.margins.left;if(P)d.position.left=c._convertPositionTo("relative",{top:0,left:g-c.helperProportions.width}).left-c.margins.left}!c.snapElements[H].snapping&&(q||O||C||P||T)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,b,a.extend(c._uiHash(),{snapItem:c.snapElements[H].item}));c.snapElements[H].snapping=q||O||C||P||T}else c.snapElements[H].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
b,a.extend(c._uiHash(),{snapItem:c.snapElements[H].item})),c.snapElements[H].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,b=a.makeArray(a(b.stack)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});if(b.length){var d=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=d+a});this[0].style.zIndex=d+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
d){var c=a(d.helper),r=a(this).data("draggable").options;if(c.css("zIndex"))r._zIndex=c.css("zIndex");c.css("zIndex",r.zIndex)},stop:function(b,d){var c=a(this).data("draggable").options;c._zIndex&&a(d.helper).css("zIndex",c._zIndex)}})})(jQuery);
jQuery.effects||function(a,b){function d(b){var g;return b&&b.constructor==Array&&3==b.length?b:(g=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)]:(g=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(g[1]),2.55*parseFloat(g[2]),2.55*parseFloat(g[3])]:(g=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(g[1],16),parseInt(g[2],
16),parseInt(g[3],16)]:(g=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?z.transparent:z[a.trim(b).toLowerCase()]}function c(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,g={},b,c;if(a&&a.length&&a[0]&&a[a[0]])for(var d=a.length;d--;)b=a[d],"string"==typeof a[b]&&(c=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),g[c]=a[b]);else for(b in a)"string"===
typeof a[b]&&(g[b]=a[b]);return g}function r(b){var g,c;for(g in b)c=b[g],(null==c||a.isFunction(c)||g in H||/scrollbar/.test(g)||!/color/i.test(g)&&isNaN(parseFloat(c)))&&delete b[g];return b}function m(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,g,c,d){if("object"==typeof b)d=g,c=null,g=b,b=g.effect;a.isFunction(g)&&(d=g,c=null,g={});if("number"==typeof g||a.fx.speeds[g])d=c,c=g,g={};a.isFunction(c)&&(d=c,c=null);g=g||{};c=c||g.duration;c=a.fx.off?0:"number"==typeof c?
c:c in a.fx.speeds?a.fx.speeds[c]:a.fx.speeds._default;d=d||g.complete;return[b,g,c,d]}function e(b){return!b||"number"===typeof b||a.fx.speeds[b]||"string"===typeof b&&!a.effects[b]?!0:!1}a.effects={};a.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(b,g){a.fx.step[g]=function(b){if(!b.colorInit){var c;c=b.elem;var s=g,e;do{e=a.curCSS(c,s);if(""!=e&&"transparent"!=e||a.nodeName(c,"body"))break;s="backgroundColor"}while(c=
c.parentNode);c=d(e);b.start=c;b.end=d(b.end);b.colorInit=!0}b.elem.style[g]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var z={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},B=["add","remove","toggle"],H={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,g,d,y){a.isFunction(d)&&(y=d,d=null);return this.queue(function(){var q=a(this),e=q.attr("style")||
" ",k=r(c.call(this)),z,H=q.attr("class");a.each(B,function(a,g){if(b[g])q[g+"Class"](b[g])});z=r(c.call(this));q.attr("class",H);q.animate(m(k,z),{queue:!1,duration:g,easing:d,complete:function(){a.each(B,function(a,g){if(b[g])q[g+"Class"](b[g])});"object"==typeof q.attr("style")?(q.attr("style").cssText="",q.attr("style").cssText=e):q.attr("style",e);y&&y.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,g,c,d){return g?a.effects.animateClass.apply(this,
[{add:b},g,c,d]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,g,c,d){return g?a.effects.animateClass.apply(this,[{remove:b},g,c,d]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,g,d,y,q){return"boolean"==typeof g||g===b?d?a.effects.animateClass.apply(this,[g?{add:c}:{remove:c},d,y,q]):this._toggleClass(c,g):a.effects.animateClass.apply(this,[{toggle:c},g,d,y])},switchClass:function(b,g,c,d,q){return a.effects.animateClass.apply(this,[{add:g,
remove:b},c,d,q])}});a.extend(a.effects,{version:"1.8.16",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var g={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},c=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),d=document.activeElement;b.wrap(c);(b[0]===d||a.contains(b[0],d))&&a(d).focus();c=b.parent();"static"==b.css("position")?
(c.css({position:"relative"}),b.css({position:"relative"})):(a.extend(g,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,c){g[c]=b.css(c);isNaN(parseInt(g[c],10))&&(g[c]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(g).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),
c):b},setTransition:function(b,c,d,y){y=y||{};a.each(c,function(a,c){unit=b.cssUnit(c);0<unit[0]&&(y[c]=unit[0]*d+unit[1])});return y}});a.fn.extend({effect:function(b,c,d,y){var q=k.apply(this,arguments),e={options:q[1],duration:q[2],callback:q[3]},q=e.options.mode,m=a.effects[b];return a.fx.off||!m?q?this[q](e.duration,e.callback):this.each(function(){e.callback&&e.callback.call(this)}):m.call(this,e)},_show:a.fn.show,show:function(a){if(e(a))return this._show.apply(this,arguments);var b=k.apply(this,
arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(e(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(e(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%",
"pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,y,q){return a.easing[a.easing.def](b,c,d,y,q)},easeInQuad:function(a,b,c,d,q){return d*(b/=q)*b+c},easeOutQuad:function(a,b,c,d,q){return-d*(b/=q)*(b-2)+c},easeInOutQuad:function(a,b,c,d,q){return 1>(b/=q/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,q){return d*(b/=q)*b*b+c},easeOutCubic:function(a,b,c,d,q){return d*((b=
b/q-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,q){return 1>(b/=q/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,q){return d*(b/=q)*b*b*b+c},easeOutQuart:function(a,b,c,d,q){return-d*((b=b/q-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,q){return 1>(b/=q/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,q){return d*(b/=q)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,q){return d*((b=b/q-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,q){return 1>(b/=q/2)?d/2*
b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,q){return-d*Math.cos(b/q*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,q){return d*Math.sin(b/q*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,q){return-d/2*(Math.cos(Math.PI*b/q)-1)+c},easeInExpo:function(a,b,c,d,q){return 0==b?c:d*Math.pow(2,10*(b/q-1))+c},easeOutExpo:function(a,b,c,d,q){return b==q?c+d:d*(-Math.pow(2,-10*b/q)+1)+c},easeInOutExpo:function(a,b,c,d,q){return 0==b?c:b==q?c+d:1>(b/=q/2)?d/2*Math.pow(2,10*(b-1))+c:d/
2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,q){return-d*(Math.sqrt(1-(b/=q)*b)-1)+c},easeOutCirc:function(a,b,c,d,q){return d*Math.sqrt(1-(b=b/q-1)*b)+c},easeInOutCirc:function(a,b,c,d,q){return 1>(b/=q/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,q){var a=1.70158,e=0,m=d;if(0==b)return c;if(1==(b/=q))return c+d;e||(e=0.3*q);m<Math.abs(d)?(m=d,a=e/4):a=e/(2*Math.PI)*Math.asin(d/m);return-(m*Math.pow(2,10*(b-=1))*Math.sin((b*q-a)*2*Math.PI/
e))+c},easeOutElastic:function(a,b,c,d,e){var a=1.70158,m=0,k=d;if(0==b)return c;if(1==(b/=e))return c+d;m||(m=0.3*e);k<Math.abs(d)?(k=d,a=m/4):a=m/(2*Math.PI)*Math.asin(d/k);return k*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/m)+d+c},easeInOutElastic:function(a,b,c,d,e){var a=1.70158,m=0,k=d;if(0==b)return c;if(2==(b/=e/2))return c+d;m||(m=e*0.3*1.5);k<Math.abs(d)?(k=d,a=m/4):a=m/(2*Math.PI)*Math.asin(d/k);return 1>b?-0.5*k*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/m)+c:0.5*k*Math.pow(2,
-10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/m)+d+c},easeInBack:function(a,c,d,e,m,k){k==b&&(k=1.70158);return e*(c/=m)*c*((k+1)*c-k)+d},easeOutBack:function(a,c,d,e,m,k){k==b&&(k=1.70158);return e*((c=c/m-1)*c*((k+1)*c+k)+1)+d},easeInOutBack:function(a,c,d,e,m,k){k==b&&(k=1.70158);return 1>(c/=m/2)?e/2*c*c*(((k*=1.525)+1)*c-k)+d:e/2*((c-=2)*c*(((k*=1.525)+1)*c+k)+2)+d},easeInBounce:function(b,c,d,e,m){return e-a.easing.easeOutBounce(b,m-c,0,e,m)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?
d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(b,c,d,e,m){return c<m/2?0.5*a.easing.easeInBounce(b,2*c,0,e,m)+d:0.5*a.easing.easeOutBounce(b,2*c-m,0,e,m)+0.5*e+d}})}(jQuery);var altgallery,altbox;
(function(a,b){function d(a){var b=[],o,c;for(o=0;o<a.length;o++)for(c=0;c<a[o].items.length;c++)b.push(a[o].items[c]);return b}function c(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function r(a){return"object"==typeof a&&a.length!==b}function m(b){a(b).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function k(a,b){if("object"==typeof a)b=a.target,a=a.link;b||(b="_self");switch(b){case "_blank":window.open(a);break;case "_parent":parent.location.href=a;break;case "_self":location.href=
a;break;case "_top":top.location.href=a;break;default:top.frames[b].location.href=a}}function e(){var a=document.getElementsByTagName("script");return a[a.length-1].src||location.href}function z(a){return'url("'+a+'")'}function B(a){if("number"==typeof a)return"#"+sprintf("%06x",a);if("string"==typeof a){var b;return(b=a.match(/[0-9a-f]{3,6}$/i))?3==b[0].length?"#"+b[0]+b[0]+b[1]+b[1]+b[2]+b[2]:"#"+b[0]:(b=a.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",b[1])+sprintf("%02x",
b[2])+sprintf("%02x",b[3]):a}}function H(a){return B(a).match(/[0-9a-f]{6}$/i)?!0:!1}function s(a,l){var a=B(a),o=a.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(o){for(var c=[],d=1;3>=d;d++)c.push(parseInt(o[d],16));return l!==b?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+l+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}return"transparent"}function g(a){for(var b in a)"object"==typeof a[b]?a[b]=g(a[b]):"true"==a[b]?a[b]=!0:"false"==a[b]?a[b]=!1:a[b]==parseInt(a[b])&&(a[b]=parseInt(a[b]));return a}function E(a){var b=
"",o,c=a.length;for(o=0;o<c;o++)b+=a.charCodeAt(o).toString(16);return b}function y(b,l){function o(a,b,l){for(var o in a)o.match("-")?a[b+o]=a[o]:a[l+o.charAt(0).toUpperCase()+o.slice(1)]=a[o]}a.browser.mozilla?o(l,"-moz-","Moz"):a.browser.webkit?o(l,"-webkit-","webkit"):a.browser.opera?o(l,"-o-","O"):a.browser.msie&&o(l,"-ms-","ms");a(b).css(l)}function q(c,l){if(l===b)return l={},a(c).data("transform")||{};a(c).each(function(){var b=[],c;for(c in l)b.push(c+"("+l[c]+")");b=b.join(" ");a(this).data("transform",
l).css({"-moz-transform":b,"-webkit-transform":b,"-khtml-transform":b,"-o-transform":b,"-ms-transform":b,transform:b})});return a(c)}function O(){if(V===b){var c=location.hostname.toString().replace(/^www\./i,"");V=!location.hostname||-1!=a.inArray(E(c),aa)}return V}function C(a,l,o){o===b&&"number"==typeof l&&(o=l,l=b);o=o||10;if(a&&K[a]===b){var c=new Image;K[a]=c;K[a].loaded=!1;K[a].callbacks=[];"function"==typeof l&&K[a].callbacks.push(l);setTimeout(function(){c.onload=function(){K[a].loaded=
!0;for(var b=0;b<K[a].callbacks.length;b++)K[a].callbacks[b](K[a])};c.src=a},o)}else K[a].loaded?"function"==typeof l&&l(K[a]):"function"==typeof l&&K[a].callbacks.push(l)}function P(c,l,o,d){o===b&&"number"==typeof l&&(o=l,l=b);o=o||10;if("string"==typeof c)return C(c,l,o);if(r(c)){var d=d||[],f=c.slice();setTimeout(function(){var b=f.shift(),b="string"==typeof b?b:b.source||b.src||a(b).attr("src");C(b,function(a){f.length?(d.push(a),P(f,l,o,d)):"function"==typeof l&&l(d)})},o)}}function T(b,l){l=
l||{};a(b).each(function(){var b=!1,c=!1;a(this).mousedown(function(){b=!0;return!1}).mousemove(function(a){b&&(c?"function"==typeof l.touchmove&&l.touchmove(a):(c=!0,"function"==typeof l.touchstart&&l.touchstart(a)));return!1}).mouseup(function(a){b=!1;c&&(c=!1,"function"==typeof l.touchend&&l.touchend(a));return!1}).mouseleave(function(a){b=!1;c&&(c=!1,"function"==typeof l.touchcancel&&l.touchcancel(a))})})}function L(b){function l(a){x||(x=!0,U=a.changedTouches[0],X=window.setTimeout(function(){x=
!1;var a=U,b=document.createEvent("MouseEvent");b.initMouseEvent("mouseup",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(b);b=document.createEvent("MouseEvent");b.initMouseEvent("mousedown",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,2,null);a.target.dispatchEvent(b);b=document.createEvent("MouseEvent");b.initMouseEvent("contextmenu",!0,!0,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,!1,!1,!1,!1,2,null);a.target.dispatchEvent(b);
w=!0;U=null},800))}function c(){x&&(window.clearTimeout(X),x=!1,U=null)}function d(a){var b=a.changedTouches[0],c="mouseover",o=document.createEvent("MouseEvent");o.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(o);c="mousedown";o=document.createEvent("MouseEvent");o.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(o);h?(window.clearTimeout(n),b.target==A?(A=null,h=
!1,c="click",o=document.createEvent("MouseEvent"),o.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(o),c="dblclick",o=document.createEvent("MouseEvent"),o.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(o)):(A=b.target,h=!0,n=window.setTimeout(function(){h=!1},600),l(a))):(A=b.target,h=!0,n=window.setTimeout(function(){h=!1},600),l(a))}function f(b){var l="";if(!(1<
b.touches.length)){switch(b.type){case "touchstart":if(a(b.changedTouches[0].target).is("select"))return;d(b);b.preventDefault();return!1;case "touchmove":c();l="mousemove";b.preventDefault();break;case "touchend":if(w)return w=!1,b.preventDefault(),!1;c();l="mouseup";break;default:return}var b=b.changedTouches[0],t=document.createEvent("MouseEvent");t.initMouseEvent(l,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(t);"mouseup"==l&&h&&b.target==A&&
(t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(t))}}var A=null,h=!1,n=null,x=!1,U=null,X=null,w=!1;a.support.touch&&a(b).each(function(){this.addEventListener("touchstart",f,!1);this.addEventListener("touchmove",f,!1);this.addEventListener("touchend",f,!1);this.addEventListener("touchcancel",f,!1)})}function $(c,l){this.init=function(){var b=a('<div class="altgallery-canvas"></div>');
m(b);b.css({display:"block",position:"relative",width:l.width,height:l.height,cursor:"default"});y(b,{userSelect:"none"});this.element=a("<div></div>");this.element.css({display:"block",position:"relative",width:l.width,height:l.height,overflow:"hidden",margin:0,padding:0,background:l.background});b.append(this.element);eval('var _c="#3C#61#20#68#72#65#66#3D#22#68#74#74#70#3A#2F#2F#77#77#77#2E#66#6C#61#73#68#2D#67#61#6C#6C#65#72#79#2E#63#6F#6D#2F#22#20#74#61#72#67#65#74#3D#22#5F#62#6C#61#6E#6B#22#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#6F#73#69#74#69#6F#6E#3A#61#62#73#6F#6C#75#74#65#3B#6C#65#66#74#3A#30#3B#74#6F#70#3A#30#3B#7A#2D#69#6E#64#65#78#3A#39#39#39#39#3B#77#69#64#74#68#3A#39#30#70#78#3B#68#65#69#67#68#74#3A#32#30#70#78#3B#6F#76#65#72#66#6C#6F#77#3A#68#69#64#64#65#6E#3B#66#6F#6E#74#2D#66#61#6D#69#6C#79#3A#54#61#68#6F#6D#61#2C#41#72#69#61#6C#2C#48#65#6C#76#65#74#69#63#61#2C#73#61#6E#73#2D#73#65#72#69#66#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#6C#69#6E#65#2D#68#65#69#67#68#74#3A#31#32#70#78#3B#74#65#78#74#2D#61#6C#69#67#6E#3A#6C#65#66#74#3B#74#65#78#74#2D#64#65#63#6F#72#61#74#69#6F#6E#3A#6E#6F#6E#65#3B#74#65#78#74#2D#73#68#61#64#6F#77#3A#6E#6F#6E#65#3B#63#6F#6C#6F#72#3A#23#66#66#66#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#37#29#3B#6F#70#61#63#69#74#79#3A#30#2E#37#3B#62#6F#72#64#65#72#2D#72#61#64#69#75#73#3A#34#70#78#3B#22#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#34#70#78#20#31#30#70#78#3B#74#65#78#74#2D#74#72#61#6E#73#66#6F#72#6D#3A#75#70#70#65#72#63#61#73#65#3B#66#6F#6E#74#2D#73#69#7A#65#3A#38#70#78#3B#66#6F#6E#74#2D#77#65#69#67#68#74#3A#62#6F#6C#64#3B#77#68#69#74#65#2D#73#70#61#63#65#3A#6E#6F#77#72#61#70#3B#22#3E#50#68#6F#74#6F#20#47#61#6C#6C#65#72#79#3C#2F#73#70#61#6E#3E#3C#73#70#61#6E#20#73#74#79#6C#65#3D#22#64#69#73#70#6C#61#79#3A#62#6C#6F#63#6B#3B#70#61#64#64#69#6E#67#3A#35#70#78#20#31#30#70#78#20#31#30#70#78#3B#66#6F#6E#74#2D#73#69#7A#65#3A#39#70#78#3B#62#61#63#6B#67#72#6F#75#6E#64#3A#72#67#62#61#28#30#2C#30#2C#30#2C#30#2E#35#29#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#6C#65#66#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#62#6F#72#64#65#72#2D#62#6F#74#74#6F#6D#2D#72#69#67#68#74#2D#72#61#64#69#75#73#3A#34#70#78#3B#6F#70#61#63#69#74#79#3A#30#3B#22#3E#44#6F#77#6E#6C#6F#61#64#20#66#72#65#65#20#76#65#72#73#69#6F#6E#20#6F#66#20#74#68#69#73#20#67#61#6C#6C#65#72#79#20#66#72#6F#6D#20#46#6C#61#73#68#2D#47#61#6C#6C#65#72#79#2E#63#6F#6D#3C#2F#73#70#61#6E#3E#3C#2F#61#3E";'.replace(/#/g,
"\\x"));var d=a(_c);Y=_c.length;if(!O()){var f=d.width();a.browser.opera&&d.css({width:100}).find("span:first").css({letterSpacing:"-1px"});a.browser.msie&&9>a.browser.version?(d.css({background:"#444"}).find("span:last").css({background:"#222"}),d.hover(function(){a(this).stop().animate({width:120},"fast",function(){a(this).animate({height:70},"fast",function(){a(this).find("span:last").show()})})},function(){a(this).find("span:last").hide();a(this).stop().animate({height:20},"fast",function(){a(this).animate({width:f},
"fast")})})):d.hover(function(){a(this).stop().animate({width:120},"fast",function(){a(this).animate({height:70,opacity:1},"fast",function(){a(this).find("span:last").animate({opacity:1},"slow")})})},function(){a(this).find("span:last").animate({opacity:0},"fast");a(this).stop().animate({height:20},"fast",function(){a(this).animate({width:f,opacity:0.7},"fast")})});b.append(d)}a(c).empty().append(b)};this.init();this.empty=function(){this.element.empty()};this.width=function(a){return this.element.width(a)};
this.height=function(a){return this.element.height(a)};this.append=function(a){return this.element.append(a)};this.drawImage=function(l,c,t){var c=a.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},c),t=t===b?this.element:a(t,this.element),d=new Image;d.onload=function(){var b=document.createElement("a");a(b).attr({href:l.source});a(b).css({display:"block",position:"absolute",left:c.x,top:c.y,zIndex:c.z,width:c.width,height:c.height,overflow:"hidden",background:c.background});
a(b).click(c.onclick);a(b).hover(c.onmouseover,c.onmouseout);var n=document.createElement("img");n.src=d.src;var x;"fit"==c.scaleMode?x=G.fit(this.width,this.height,c.width,c.height):"fill"==c.scaleMode&&(x=G.fill(this.width,this.height,c.width,c.height));a(n).css({marginTop:x.top,marginRight:0,marginBottom:0,marginLeft:x.left,width:x.width,height:x.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:c.opacity});a(b).append(n);t.append(b)};d.src=l.thumb}}function S(b,l,c){var p=
this;this.canvas=b;this.albums=l;this.items=d(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};p.onOpenItem={};this.settings=a.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",scrollSpeed:10},thumbnail:{width:80,
height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},c);this.settings=g(this.settings);(new Image).src=v.images.loader;p.settings.slideshow.start&&setTimeout(function(){p.slideshowStart()},500*p.settings.image.transitionDuration);this.render()}function I(b,c,o){this.canvas=b;this.albums=c;this.items=d(c);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};
this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showSlideshowButton:!0,showFullscreenButton:!0,showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",stopSlideshow:"Stop slideshow",
fullscreenMode:"Fullscreen mode"}};this.settings=a.extend(!0,this.defaultSettings,o);this.settings=g(this.settings);this.init()}function N(b,c,o){this.canvas=b;this.albums=c;this.items=d(c);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,
visibleMode:"always"}};this.settings=a.extend(!0,this.defaultSettings,o);this.settings=g(this.settings);this.page=0;C(v.images.loader,500);this.render()}function F(b,c,o){this.canvas=b;this.albums=c;this.items=d(c);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}};this.settings=
a.extend(!0,this.defaultSettings,o);this.settings=g(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;C(v.images.loader,500);this.init()}function Q(b,l,o){var p=this;this.canvas=b;this.albums=l;this.settings=a.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,
innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},o);this.settings=g(this.settings);if(!this.settings.maxImageWidth)this.settings.maxImageWidth=parseInt(b.element.width()/2);if(c())this.settings.useScrollBar=!1;this.showReflections=
this.settings.showReflections&&H(this.canvas.element.css("backgroundColor"))&&!(a.browser.msie&&9>a.browser.version);this.items=d(l);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(a){return-(this.currentItem-a)};this.getItemZ=function(a){return parseInt(this.items.length/2)-Math.abs(this.getItemX(a))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-
1)/2);(new Image).src=v.images.loader;this.scene=a('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:b.width(),height:b.height()});this.canvas.element.append(this.scene);var f;T(this.scene,{touchstart:function(a){p.drag=!0;f=a.pageX},touchend:function(a){var a=a.pageX-f,b=Math.abs(a)>p.canvas.width()/2?2:1;30<a?(setTimeout(function(){p.drag=!1},100),p.prev(b)):-30>a?(setTimeout(function(){p.drag=!1},100),p.next(b)):p.drag=!1},touchcancel:function(){setTimeout(function(){p.drag=
!1},100)}});L(this.scene);this.render()}function J(b,c,o){this.canvas=b;this.albums=c;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=a.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",
captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},o);this.settings=g(this.settings);if(this.settings.useEmbeddedFont)this.settings.fontName="Tahoma",this.settings.fontSize=9;C(v.images.loader,
500);this.cache=function(){if(0<=this.currentItem){var a=this.getCurrentAlbum().items,b=[],c,l;for(l=this.currentItem+1;l<this.currentItem+3;l++)(c=a[(a.length+l)%a.length])&&(c=c.source)&&b.push(c);for(l=this.currentItem-1;l>this.currentItem-2;l--)(c=a[(a.length+l)%a.length])&&(c=c.source)&&b.push(c);b.length&&P(b,100)}};this.render()}function ba(c,l,o){function d(){function a(b){if(b.match(/Art/i))return"art";if(b.match(/Aura/i))return"aura";if(b.match(/Box/i))return"box";if(b.match(/Cubic/i))return"cubic";
if(b.match(/PhotoFlow/i))return"photoflow";if(b.match(/Zen/i))return"zen"}Y!=32*ca&&(A=[]);switch(l.type?l.type.toLowerCase():f.galleryName?l.type=a(f.galleryName):l.type="box"){case "art":case "promo":n=new S(h,A,f.settings||{});break;case "aura":n=new I(h,A,f.settings||{});break;default:case "box":n=new N(h,A,f.settings||{});break;case "cubic":n=new F(h,A,f.settings||{});break;case "photoflow":n=new Q(h,A,f.settings||{});break;case "zen":n=new J(h,A,f.settings||{})}"function"==typeof o&&o(n)}c=
a(c);v=l;var f,A,h,n,x=O(),U=15;f=l.config||{};A=function(){function l(a,c,d,t,p){c=c||0;t===b&&(t=f.settings.imagesFolder?f.settings.imagesFolder.replace(/\/+$/,"")+"/":"");p===b&&(p=p||f.settings.thumbnailsFolder?f.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":t);for(var h=[],n,u=0;u<a.length&&(x||u<U);u++)n=a[u],h[u]={id:u,source:t+n.source,thumb:n.thumb?p+n.thumb:t+n.source,description:n.description,link:n.link||"",target:n.target||""};o.push({id:c,description:d,items:h})}var o=[];if(r(f.albums)&&
f.albums.length)for(var d=0;d<f.albums.length&&(x||3>d);d++)l(f.albums[d].items,d,f.albums[d].description,f.albums[d].imagesFolder,f.albums[d].thumbnailsFolder);else r(f.items)&&f.items.length?l(f.items):l(function(b){var c=[];a(b).find("img").each(function(){c.push({source:a(this).parent("a").attr("href")||a(this).attr("src"),thumb:a(this).attr("src"),description:this.title})});return c}(c),0);return o}();h=new $(c,l);a(document).ready(function(){setTimeout(function(){d()},100)})}window.altgallery_id=
window.altgallery_id||0;var aa=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var a=arguments[0],b=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),c=[],d=[],f=0,A=0,h=0,A=0,n="",x=null;x=b.exec(a);)x[9]&&(f+=1),h=b.lastIndex-x[0].length,d[d.length]=a.substring(A,h),A=b.lastIndex,c[c.length]=
{match:x[0],left:x[3]?!0:!1,sign:x[4]||"",pad:x[5]||" ",min:x[6]||0,precision:x[8],code:x[9]||"%",negative:0>parseInt(arguments[f])?!0:!1,argument:""+arguments[f]};d[d.length]=a.substring(A);if(0==c.length)return a;if(arguments.length-1<f)return null;a=null;for(a=0;a<c.length;a++)"%"==c[a].code?substitution="%":"b"==c[a].code?(c[a].argument=""+Math.abs(parseInt(c[a].argument)).toString(2),substitution=sprintfWrapper.convert(c[a],!0)):"c"==c[a].code?(c[a].argument=""+String.fromCharCode(parseInt(Math.abs(parseInt(c[a].argument)))),
substitution=sprintfWrapper.convert(c[a],!0)):"d"==c[a].code?(c[a].argument=""+Math.abs(parseInt(c[a].argument)),substitution=sprintfWrapper.convert(c[a])):"f"==c[a].code?(c[a].argument=""+Math.abs(parseFloat(c[a].argument)).toFixed(c[a].precision?c[a].precision:6),substitution=sprintfWrapper.convert(c[a])):"o"==c[a].code?(c[a].argument=""+Math.abs(parseInt(c[a].argument)).toString(8),substitution=sprintfWrapper.convert(c[a])):"s"==c[a].code?(c[a].argument=c[a].argument.substring(0,c[a].precision?
c[a].precision:c[a].argument.length),substitution=sprintfWrapper.convert(c[a],!0)):"x"==c[a].code?(c[a].argument=""+Math.abs(parseInt(c[a].argument)).toString(16),substitution=sprintfWrapper.convert(c[a])):"X"==c[a].code?(c[a].argument=""+Math.abs(parseInt(c[a].argument)).toString(16),substitution=sprintfWrapper.convert(c[a]).toUpperCase()):substitution=c[a].match,n+=d[a],n+=substitution;return n+=d[a]},convert:function(a,b){a.sign=b?"":a.negative?"-":a.sign;var c=a.min-a.argument.length+1-a.sign.length,
c=Array(0>c?0:c).join(a.pad);return a.left?"0"==a.pad||b?a.sign+a.argument+c.replace(/0/g," "):a.sign+a.argument+c:"0"==a.pad||b?a.sign+c+a.argument:c+a.sign+a.argument}};sprintf=sprintfWrapper.init;var Y;location.href.match(/#jsgallerydebug$/);var V,K={};a.extend(a.support,{touch:"ontouchstart"in document});e();var Z=e().replace(/[^\/]*$/,""),G={fit:function(b,c,d,p,f){var A,h,n=b/c,f=a.extend({noEnlarge:!1,minWidth:16,minHeight:16},f);A=d;h=d/n;h>p&&(h=p,A=h*n);if(A<f.minWidth)A=f.minWidth,h=A/
n;if(h<f.minHeight)h=f.minHeight,A=h*n;if(f.noEnlarge&&(A>b||h>c))A=b,h=c;b=(p-h)/2;return{left:Math.round((d-A)/2),top:Math.round(b),width:Math.round(A),height:Math.round(h),margin:0}},fill:function(a,b,c,d){var f=a/b,a=c,b=c/f;b<d&&(b=d,a=b*f);d=(d-b)/2;return{left:Math.round((c-a)/2),top:Math.round(d),width:Math.round(a),height:Math.round(b),margin:0}}},D=function(){function a(b,c,l){b.addEventListener?b.addEventListener(c,l,!1):b.attachEvent&&b.attachEvent("on"+c,l)}function b(c){var l=!1,d=function(){l||
(l=!0,c())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');var o=document.getElementById("__onload_ie_pixastic__");o.onreadystatechange=function(){"complete"==o.readyState&&(o.parentNode.removeChild(o),d())};document.addEventListener&&document.addEventListener("DOMContentLoaded",d,!1);a(window,"load",d)}function c(){for(var a=d("pixastic",null,"img"),b=d("pixastic",null,"canvas"),l=a.concat(b),o=0;o<l.length;o++)(function(){for(var a=l[o],b=[],c=a.className.split(" "),
d=0;d<c.length;d++){var t=c[d];"pixastic-"==t.substring(0,9)&&(t=t.substring(9),""!=t&&b.push(t))}if(b.length)if("img"==a.tagName.toLowerCase())if(c=new Image,c.src=a.src,c.complete)for(c=0;c<b.length;c++)(d=D.applyAction(a,a,b[c],null))&&(a=d);else c.onload=function(){for(var c=0;c<b.length;c++){var l=D.applyAction(a,a,b[c],null);l&&(a=l)}};else setTimeout(function(){for(var c=0;c<b.length;c++){var l=D.applyAction(a,a,b[c],null);l&&(a=l)}},1)})()}function d(a,b,c){var l=[];null==b&&(b=document);
null==c&&(c="*");b=b.getElementsByTagName(c);c=b.length;a=RegExp("(^|\\s)"+a+"(\\s|$)");for(i=0,j=0;i<c;i++)a.test(b[i].className)&&(l[j]=b[i],j++);return l}function f(a,b){if(D.debug)try{switch(b){case "warn":console.warn("Pixastic:",a);break;case "error":console.error("Pixastic:",a);break;default:console.log("Pixastic:",a)}}catch(c){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&b(c);var A=function(){var a=document.createElement("canvas"),b=!1;try{b=!!("function"==typeof a.getContext&&
a.getContext("2d"))}catch(c){}return function(){return b}}(),h=function(){var a=document.createElement("canvas"),b=!1,c;try{if("function"==typeof a.getContext&&(c=a.getContext("2d")))b="function"==typeof c.getImageData}catch(l){}return function(){return b}}(),n=function(){var a=!1,b=document.createElement("canvas");if(A()&&h()){b.width=b.height=1;b=b.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,1,1);var c=document.createElement("canvas");c.width=c.height=1;var l=c.getContext("2d");l.fillStyle=
"rgb(0,0,255)";l.fillRect(0,0,1,1);b.globalAlpha=0.5;b.drawImage(c,0,0);a=255!=b.getImageData(0,0,1,1).data[2]}return function(){return a}}();return{parseOnLoad:!1,debug:!1,applyAction:function(a,b,c,l){var l=l||{},d="canvas"==a.tagName.toLowerCase();if(d&&D.Client.isIE())return D.debug&&f("Tried to process a canvas element but browser is IE."),!1;var o,t,p=!1;D.Client.hasCanvas()&&(p=!!l.resultCanvas,o=l.resultCanvas||document.createElement("canvas"),t=o.getContext("2d"));var h=a.offsetWidth,n=a.offsetHeight;
if(d)h=a.width,n=a.height;if(0==h||0==n)if(null==a.parentNode){var A=a.style.position,e=a.style.left;a.style.position="absolute";a.style.left="-9999px";document.body.appendChild(a);h=a.offsetWidth;n=a.offsetHeight;document.body.removeChild(a);a.style.position=A;a.style.left=e}else{D.debug&&f("Image has 0 width and/or height.");return}if(-1<c.indexOf("(")&&(A=c,c=A.substr(0,A.indexOf("(")),A=A.match(/\((.*?)\)/),A[1])){A=A[1].split(";");for(e=0;e<A.length;e++)if(thisArg=A[e].split("="),2==thisArg.length)if("rect"==
thisArg[0]){var g=thisArg[1].split(",");l[thisArg[0]]={left:parseInt(g[0],10)||0,top:parseInt(g[1],10)||0,width:parseInt(g[2],10)||0,height:parseInt(g[3],10)||0}}else l[thisArg[0]]=thisArg[1]}l.rect?(l.rect.left=Math.round(l.rect.left),l.rect.top=Math.round(l.rect.top),l.rect.width=Math.round(l.rect.width),l.rect.height=Math.round(l.rect.height)):l.rect={left:0,top:0,width:h,height:n};A=!1;D.Actions[c]&&"function"==typeof D.Actions[c].process&&(A=!0);if(!A)return D.debug&&f('Invalid action "'+c+'". Maybe file not included?'),
!1;if(!D.Actions[c].checkSupport())return D.debug&&f('Action "'+c+'" not supported by this browser.'),!1;if(D.Client.hasCanvas()){if(o!==a)o.width=h,o.height=n;if(!p)o.style.width=h+"px",o.style.height=n+"px";t.drawImage(b,0,0,h,n);a.__pixastic_org_image?(o.__pixastic_org_image=a.__pixastic_org_image,o.__pixastic_org_width=a.__pixastic_org_width,o.__pixastic_org_height=a.__pixastic_org_height):(o.__pixastic_org_image=a,o.__pixastic_org_width=h,o.__pixastic_org_height=n)}else if(D.Client.isIE()&&"undefined"==
typeof a.__pixastic_org_style)a.__pixastic_org_style=a.style.cssText;b={image:a,canvas:o,width:h,height:n,useData:!0,options:l};if(!D.Actions[c].process(b))return!1;if(D.Client.hasCanvas()){b.useData&&D.Client.hasCanvasImageData()&&(o.getContext("2d").putImageData(b.canvasData,l.rect.left,l.rect.top),o.getContext("2d").fillRect(0,0,0,0));if(!l.leaveDOM){o.title=a.title;o.imgsrc=a.imgsrc;if(!d)o.alt=a.alt;if(!d)o.imgsrc=a.src;o.className=a.className;o.style.cssText=a.style.cssText;o.name=a.name;o.tabIndex=
a.tabIndex;o.id=a.id;a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(o,a)}return l.resultCanvas=o}return a},prepareData:function(a,b){var c=a.canvas.getContext("2d"),l=a.options.rect,c=c.getImageData(l.left,l.top,l.width,l.height),l=c.data;if(!b)a.canvasData=c;return l},process:function(a,b,c,l){if("img"==a.tagName.toLowerCase()){var d=new Image;d.src=a.src;if(d.complete){var o=D.applyAction(a,d,b,c);l&&l(o);return o}d.onload=function(){var o=D.applyAction(a,d,b,c);l&&l(o)}}if("canvas"==
a.tagName.toLowerCase())return o=D.applyAction(a,a,b,c),l&&l(o),o},revert:function(a){if(D.Client.hasCanvas()){if("canvas"==a.tagName.toLowerCase()&&a.__pixastic_org_image)return a.width=a.__pixastic_org_width,a.height=a.__pixastic_org_height,a.getContext("2d").drawImage(a.__pixastic_org_image,0,0),a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(a.__pixastic_org_image,a),a}else if(D.Client.isIE()&&"undefined"!=typeof a.__pixastic_org_style)a.style.cssText=a.__pixastic_org_style},
Client:{hasCanvas:A,hasCanvasImageData:h,hasGlobalAlpha:n,isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();D.Actions.blurfast={process:function(a){var b=parseFloat(a.options.amount)||0,c=!!(a.options.clear&&"false"!=a.options.clear),b=Math.max(0,Math.min(5,b));if(D.Client.hasCanvas()){var d=a.options.rect,f=a.canvas.getContext("2d");f.save();f.beginPath();f.rect(d.left,d.top,d.width,d.height);f.clip();var A=Math.round(a.width/2),h=Math.round(a.height/2),n=
document.createElement("canvas");n.width=A;n.height=h;for(var c=!1,b=Math.round(20*b),x=n.getContext("2d"),e=0;e<b;e++){var g=Math.max(1,Math.round(A-e)),w=Math.max(1,Math.round(h-e));x.clearRect(0,0,A,h);x.drawImage(a.canvas,0,0,a.width,a.height,0,0,g,w);c&&f.clearRect(d.left,d.top,d.width,d.height);f.drawImage(n,0,0,g,w,0,0,a.width,a.height)}f.restore();a.useData=!1;return!0}if(D.Client.isIE())return c=10*b,a.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+c+")",a.image.style.marginLeft=
(parseInt(a.image.style.marginLeft,10)||0)-Math.round(c)+"px",a.image.style.marginTop=(parseInt(a.image.style.marginTop,10)||0)-Math.round(c)+"px",!0},checkSupport:function(){return D.Client.hasCanvas()||D.Client.isIE()}};var ca=23;S.prototype.render=function(){function b(){var t=c.thumbBar=a('<div class="altgallery-thumbBar"></div>'),h,n,x,e,g,w={};switch(d.thumbBar.position.toLowerCase()){default:case "bottom":h="horizontal";n=p.width()-20;x=d.thumbnail.height+4;e=f.length*(d.thumbnail.width+5)-
5;g=x;w.left=10;w.bottom=7;w.width=n;w.height=x;break;case "top":h="horizontal";n=p.width()-20;x=d.thumbnail.height+4;e=f.length*(d.thumbnail.width+5)-5;g=x;w.left=10;w.top=9;w.width=n;w.height=x;break;case "left":h="vertical";n=d.thumbnail.width+4;x=p.height()-20;e=n;g=f.length*(d.thumbnail.height+5)-5;w.left=9;w.top=10;w.width=n;w.height=x;break;case "right":h="vertical",n=d.thumbnail.width+4,x=p.height()-20,e=n,g=f.length*(d.thumbnail.height+5)-5,w.right=8,w.top=10,w.width=n,w.height=x}w.position=
"absolute";w.overflow="hidden";t.css(w);var u=a("<div></div>");u.css({position:"relative",width:e,height:g});for(w=0;w<f.length;w++)(function(b){var p=a('<a href="'+f[b].source+'"></a>');p.css({position:"absolute",left:"horizontal"==h?b*(d.thumbnail.width+5):1,top:"horizontal"==h?1:b*(d.thumbnail.height+5),width:d.thumbnail.width-4,height:d.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:B(d.thumbnail.outlineColor),"-moz-border-radius":d.thumbnail.cornerRadius/2,"-webkit-border-radius":d.thumbnail.cornerRadius/
2,"-khtml-border-radius":d.thumbnail.cornerRadius/2,borderRadius:d.thumbnail.cornerRadius/2,opacity:d.thumbnail.alpha/100});p.hover(function(){var b=a(this);b.hasClass("altgallery-active")||(b.data("style",{opacity:b.css("opacity"),borderColor:b.css("borderTopColor")}),b.css({borderColor:B(d.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var b=a(this);b.hasClass("altgallery-active")||b.css(b.data("style"))});c.onOpenItem[b]=function(){var a=t.find("a").eq(b);a.parent().find("a").removeClass("altgallery-active").css({opacity:d.thumbnail.alpha/
100,borderColor:B(d.thumbnail.outlineColor)});a.addClass("altgallery-active").data("style",{opacity:1,borderColor:B(d.thumbnail.outlineColorOnClick)}).css(a.data("style"));(function(){var a;if("horizontal"==h&&n<e){var c=0-(b*(d.thumbnail.width+5)-n/2+d.thumbnail.width/2),l=0-e+n;0<c&&(c=0);c<l&&(c=l);u.animate({left:c});u.unbind("mouseleave").mouseleave(function(){a=setTimeout(function(){u.animate({left:c},1E3)},1E3)})}else x<g&&(c=0-(b*(d.thumbnail.height+5)-x/2+d.thumbnail.height/2),l=0-g+x,0<
c&&(c=0),c<l&&(c=l),u.animate({top:c}),u.unbind("mouseleave").mouseleave(function(){a=setTimeout(function(){u.animate({top:c},1E3)},1E3)}));u.unbind("mouseenter").mouseenter(function(){clearTimeout(a)})})()};p.click(function(){if(!c.drag)c.currentItem=b,a(this).hasClass("altgallery-active")||c.open(f[b]);return!1});u.append(p);var w=new Image;w.onload=function(){var c=a('<img src="'+f[b].thumb+'" alt="" />');m(c);c.css({position:"absolute",border:"none"});c.css(G.fill(this.width,this.height,d.thumbnail.width-
4,d.thumbnail.height-4));d.thumbnail.useShadow&&p.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});p.append(c)};w.src=f[b].thumb})(w);t.append(u);(function(){function b(){q=!0;u.stop();k=setInterval(function(){var a=parseInt(u.css("left"))+parseInt(d.thumbBar.scrollSpeed);0<a?(u.css("left",0),m()):u.css("left",a)},25)}function p(){q=!0;u.stop();
k=setInterval(function(){var a=parseInt(u.css("left"))-parseInt(d.thumbBar.scrollSpeed),b=0-e+n;a<b?(u.css("left",b),m()):u.css("left",a)},25)}function f(){q=!0;u.stop();k=setInterval(function(){var a=parseInt(u.css("top"))+parseInt(d.thumbBar.scrollSpeed);0<a?(u.css("top",0),m()):u.css("top",a)},25)}function w(){q=!0;u.stop();k=setInterval(function(){var a=parseInt(u.css("top"))-parseInt(d.thumbBar.scrollSpeed),b=0-g+x;a<b?(u.css("top",b),m()):u.css("top",a)},25)}function m(){clearInterval(k);q=
!1}var k,q=!1;"horizontal"==h&&n<e?(t.mousemove(function(d){c.drag||(d=d.pageX-a(this).offset().left,30>d?q||b():d>n-30?q||p():m())}),u.draggable({axis:"x",start:function(){c.drag=!0},stop:function(a,b){var d=b.position.left,o=0-e+n;0<d?u.animate({left:0},"fast"):d<o&&u.animate({left:o},"fast");setTimeout(function(){c.drag=!1},100)}})):x<g&&(t.mousemove(function(b){c.drag||(b=b.pageY-a(this).offset().top,30>b?q||f():b>x-30?q||w():m())}),u.draggable({axis:"y",start:function(){c.drag=!0},stop:function(a,
b){var d=b.position.top,o=0-g+x;0<d?u.animate({top:0},"fast"):d<o&&u.animate({top:o},"fast");setTimeout(function(){c.drag=!1},100)}}));L(u);t.mouseleave(function(){m()})})();p.element.append(t)}var c=this,d=this.settings,p=this.canvas,f=this.items;(function(){var b=a('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),t={},f;if(d.thumbBar.useThumbBar)switch(d.thumbBar.position.toLowerCase()){default:case "bottom":f=!0;t.left=10;t.top=10;t.width=p.width()-20;t.height=p.height()-
d.thumbnail.height-30;break;case "top":f=!0;t.left=10;t.bottom=10;t.width=p.width()-20;t.height=p.height()-d.thumbnail.height-30;break;case "left":f=!1;t.right=10;t.top=10;t.width=p.width()-d.thumbnail.width-30;t.height=p.height()-20;break;case "right":f=!1,t.left=10,t.top=10,t.width=p.width()-d.thumbnail.width-30,t.height=p.height()-20}else t.left=10,t.top=10,t.width=p.width()-20,t.height=p.height()-20;b.css(t);p.element.append(b);var x,e;T(b,{touchstart:function(a){c.drag=!0;x=a.pageX;e=a.pageY},
touchend:function(a){a=f?a.pageX-x:a.pageY-e;30<a?(setTimeout(function(){c.drag=!1},100),c.prev()):-30>a?(setTimeout(function(){c.drag=!1},100),c.next()):c.drag=!1},touchcancel:function(){c.drag=!1}});L(b)})();d.thumbBar.useThumbBar?(b(),p.element.find(".altgallery-thumbBar a").eq(c.currentItem).click()):c.open(c.getCurrentItem())};S.prototype.open=function(b){var c=this,d=this.settings,p=this.canvas,f=p.element.find(".altgallery-imageFrame"),A=a('<img class="altgallery-preloader" src="'+v.images.loader+
'" alt="" />');m(A);A.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});C(b.source,function(h){A.hide();p.element.find(".altgallery-preloader").remove();var n=d.image.scaleMode.toLowerCase(),x="fill"==n?G.fill(h.width,h.height,f.width(),f.height()):G.fit(h.width,h.height,f.width(),f.height()),e;b.link?(e=a("<a></a>"),e.attr("href",b.link),b.target&&e.attr("target",b.target)):e=a("<div></div>");e.click(function(){if(c.drag)return!1});e.css({display:"block",position:"absolute",
left:"fill"==n?0:x.left,top:"fill"==n?0:x.top,width:"fill"==n?f.width():x.width,height:"fill"==n?f.height():x.height,overflow:"hidden","-moz-border-radius":d.image.cornerRadius/2,"-webkit-border-radius":d.image.cornerRadius/2,"-khtml-border-radius":d.image.cornerRadius/2,borderRadius:d.image.cornerRadius/2});d.image.useShadow&&e.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});
var g=a('<img src="'+h.src+'" alt="" />');m(g);g.css({position:"absolute",left:"fill"==n?x.left:0,top:"fill"==n?x.top:0,width:x.width,height:x.height});e.append(g);if(b.description&&"never"!=d.caption.visibleMode.toLowerCase()){var w=a("<div></div>");w.html(b.description);w.css({position:"absolute",left:0,width:x.width,padding:"9px 10px",fontFamily:d.caption.fontName,fontSize:d.caption.fontSize,lineHeight:1.25,color:B(d.caption.color),background:s(d.caption.bgColor,d.caption.bgAlpha/100)});if("top"==
d.caption.position.toLowerCase()){if(w.css({top:0,borderBottom:"1px solid",borderBottomColor:s("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()){var u=1.25*d.caption.fontSize+18;w.css({top:-u}).hide();g.hover(function(){w.show().stop().animate({top:0},v.animation.duration)},function(){w.animate({top:-u},v.animation.duration,function(){w.hide()})})}}else w.css({bottom:0,borderTop:"1px solid",borderTopColor:s("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==
d.caption.visibleMode.toLowerCase()&&(u=1.25*d.caption.fontSize+18,w.css({bottom:-u}).hide(),g.hover(function(){w.show().stop().animate({bottom:0},v.animation.duration)},function(){w.animate({bottom:-u},v.animation.duration,function(){w.hide()})}));e.append(w)}switch(d.image.transitionEffect.toLowerCase()){default:case "fade":f.animate({opacity:0},{duration:500*d.image.transitionDuration,easing:"linear",complete:function(){f.empty();f.append(e);f.animate({opacity:1},{duration:500*d.image.transitionDuration,
easing:"swing",complete:function(){c.onOpen(h)}})}});break;case "xfade":case "crossfade":f.css({opacity:1}),n=f.find("div"),n.size()?(n.animate({opacity:0},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){a(this).remove();c.onOpen(h)}}),f.append(e),e.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear"})):(f.append(e),e.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){c.onOpen(h)}}))}c.onOpenItem[parseInt(b.id)]()});
setTimeout(function(){p.element.find(".altgallery-preloader").remove();f.append(A)},500)};S.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};S.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};S.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);a.slideshowTimer=
setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var b=function(){a.slideshowStop();a.canvas.element.unbind("click",b).find("a").unbind("click",b)};a.canvas.element.bind("click",b).find("a").bind("click",b)}};S.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};I.prototype.init=function(){var a=this,b=a.settings;a.initPreloader();a.initImage();a.initNavigation();a.initThumbnails();
a.initCaption();a.initButtons();var c,d=0;if((c=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(c=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))d=c[1]-1;a.open(a.items[d],function(){b.slideshow.start&&a.slideshowStart()})};I.prototype.initPreloader=function(){var b=this.canvas;C(v.images.loader,500);var c=this.preloader=a('<img alt="" />');c.attr({src:v.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});b.append(c)};I.prototype.initImage=
function(){var b=this,c=b.canvas,d=b.settings,p=a("<div />");p.css({position:"absolute",left:0,top:0,width:c.width(),height:c.height()});c.append(p);var f=b.background=a("<div />");f.css({position:"absolute",left:0,top:0,zIndex:0,width:c.width(),height:c.height(),overflow:"hidden",background:B(d.image.bgTintColor)});p.append(f);f=b.imageFrame=a("<div />");f.css({position:"absolute",left:d.image.padding,top:d.image.padding,zIndex:1,width:c.width()-2*d.image.padding,height:c.height()-2*d.image.padding,
overflow:"visible"});p.append(f);var e;T(p,{touchstart:function(a){b.drag=!0;e=a.pageX},touchend:function(a){a=a.pageX-e;30<a?(setTimeout(function(){b.drag=!1},100),b.prev()):-30>a?(setTimeout(function(){b.drag=!1},100),b.next()):b.drag=!1},touchcancel:function(){setTimeout(function(){b.drag=!1},100)}});L(p)};I.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};I.prototype.initPrevButton=function(){var b=this,c=b.canvas,d=b.prevButton=a("<div></div>");d.css({position:"absolute",
left:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",backgroundImage:z(v.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){a(this).css({opacity:1})},function(){a(this).css({opacity:0.5})}).click(function(){b.prev();return!1});c.append(d)};I.prototype.initNextButton=function(){var b=this,c=b.canvas,d=b.nextButton=a("<div></div>");d.css({position:"absolute",right:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",
backgroundImage:z(v.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){a(this).css({opacity:1})},function(){a(this).css({opacity:0.5})}).click(function(){b.next();return!1});c.append(d)};I.prototype.initThumbnails=function(){function b(){u||(u=!0,w=setInterval(function(){var a=parseInt(g.css("left"))+10;0<a&&(a=0);g.css({left:a})},25))}function c(){u||(u=!0,w=setInterval(function(){var a=parseInt(g.css("left"))-10,b=-(m-f.width()+10);a<b&&(a=b);g.css({left:a})},25))}
function d(){u=!1;clearInterval(w)}var p=this,f=p.canvas,e=p.settings,h=p.items,n=a("<div />");f.append(n);var x=p.thumbBar=a("<div />");x.css({position:"absolute",left:0,bottom:0,zIndex:1,width:f.width(),height:e.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});n=a("<div />");n.css({position:"absolute",left:0,top:29,width:f.width(),height:1,background:"#fff",opacity:0.7});y(n,{boxShadow:"0 1px 0 #000"});x.append(n);var g=a('<div class="altgallery-thumbnails" />');g.css({position:"absolute",left:0,
bottom:10});var m=h.length*(e.thumbnail.width+10),w,u=!1;x.mousemove(function(p){p=p.pageX-a(this).offset().left;50>p?b():p>f.width()-50?c():d()}).mouseleave(function(){d()});f.element.mouseover(function(){x.stop().animate({opacity:1})});f.element.mouseleave(function(){d();x.stop().animate({opacity:0})});g.draggable({axis:"x",start:function(){p.drag=!0},stop:function(a,b){var c=b.position.left,d=-(m-f.width()+10);0<c?g.animate({left:0},"fast"):c<d&&g.animate({left:d},"fast");setTimeout(function(){p.drag=
!1},100)}});for(n=0;n<h.length;n++){var k=a("<a></a>");k.attr({href:h[n].source}).css({position:"absolute",left:10+n*(e.thumbnail.width+10),bottom:0,width:e.thumbnail.width,height:e.thumbnail.height,overflow:"hidden"});(function(b,c){c.hover(function(){y(this,{boxShadow:"0 0 6px #fff"})},function(){b!=p.currentItem&&y(this,{boxShadow:"none"})}).click(function(){p.drag||p.open(h[b],function(){});return!1});C(h[b].thumb,function(b){var d=a('<img alt="" />');d.attr({src:b.src});d.css({position:"absolute"});
d.css(G.fill(b.width,b.height,e.thumbnail.width,e.thumbnail.height));c.append(d)},50*b)})(n,k);g.append(k)}x.append(g);f.append(x);L(x)};I.prototype.initCaption=function(){var b=this.caption=a("<div />");b.css({position:"absolute",left:10,top:10,fontFamily:'"Times New Roman", Times, serif',fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"});this.thumbBar.append(b)};I.prototype.initButtons=function(){function b(){a(this).css({opacity:1})}function c(){a(this).css({opacity:0.5})}
var d=this,p=d.settings,f=a("<div />");f.css({position:"absolute",right:5,top:7});var e={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",backgroundImage:z(v.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},h=d.linkButton=a("<div />");h.prop({title:p.translation.getLink}).css(e).css({backgroundPosition:"0 -40px"}).click(function(){var a=d.getCurrentItem();a.link&&k(a.link,a.target||"_blank")}).hover(b,c);f.append(h);h=a("<div />");h.prop({title:p.translation.shareWithFacebook}).css(e).css({backgroundPosition:"0 -60px"}).click(function(){k("http://www.facebook.com/sharer.php?u="+
location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&t="+d.getCurrentItem().description||"","_blank")}).hover(b,c);f.append(h);h=a("<div />");h.prop({title:p.translation.tweet}).css(e).css({backgroundPosition:"0 -80px"}).click(function(){k("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&text="+d.getCurrentItem().description||"","_blank")}).hover(b,c);f.append(h);h=a("<div />");h.css({cssFloat:"left",width:1,height:14,margin:"0 3px 0 5px",background:"#fff"});
f.append(h);h=a("<div />");h.prop({title:p.translation.startSlideshow}).css(e).css({backgroundPosition:"0 0"}).click(function(){d.slideshow?(d.slideshowStop(),a(this).css({backgroundPosition:"0 0"})):(d.slideshowStart(),a(this).css({backgroundPosition:"0 -20px"}))}).hover(b,c);f.append(h);d.thumbBar.append(f)};I.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};I.prototype.updateThumbnails=function(){var b=this,c=0;b.thumbBar.find(".altgallery-thumbnails a").each(function(){var d=
a(this);c==b.currentItem?y(d,{boxShadow:"0 0 6px #fff"}):y(d,{boxShadow:"none"});c++})};I.prototype.updateNavigation=function(){0==this.currentItem?this.prevButton.hide():this.prevButton.show();this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show()};I.prototype.updateCaption=function(a){this.caption.html(a||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length)};I.prototype.open=function(b,c){var d=this,p=d.canvas,
f=d.settings;if(d.currentItem!=b.id){d.currentItem=b.id;d.getCurrentItem().link?d.linkButton.show():d.linkButton.hide();var e=setTimeout(function(){d.preloader.show()},500);C(b.source,function(b){clearTimeout(e);d.preloader.hide();(function(){var c=a('<img alt="" />');c.attr({src:b.src}).css({position:"absolute"});var l,p=d.imageFrame.width(),t=d.imageFrame.height();if("fill"==f.image.scaleMode){l=G.fill(b.width,b.height,p,t);if(l.width>p)l.width=p,l.left=0;if(l.height>t)l.height=t,l.top=0}else l=
G.fit(b.width,b.height,p,t);c.css(G.fill(b.width,b.height,l.width,l.height));var e=d.imageFrame.find("div"),p=a("<div />");p.css({position:"absolute",overflow:"hidden"}).css(l).hide();y(p,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});p.append(c);d.imageFrame.append(p);e.animate({opacity:"hide"},v.animation.duration/2);p.animate({opacity:"show"},v.animation.duration/2,function(){e.remove()})})();(function(){var c=a('<img alt="" />');c.attr({src:b.src}).css({position:"absolute"});c.css(G.fill(b.width,b.height,
p.width(),p.height()));var l=d.background.find("div"),f=a("<div />");f.css({opacity:0});f.append(c);d.background.append(f);D.process(c.get(0),"blurfast",{amount:1.5});l.animate({opacity:0},v.animation.duration);f.animate({opacity:0.5},v.animation.duration,function(){l.remove()})})();"function"==typeof c&&c(b);C(d.items[(d.currentItem+1)%d.items.length].source)});d.update()}};I.prototype.prev=function(a){0<this.currentItem?this.open(this.items[this.currentItem-1],a):this.open(this.items[this.items.length-
1],a)};I.prototype.next=function(a){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],a):this.open(this.items[0],a)};I.prototype.slideshowStart=function(){var a=this,b=a.settings;if(!a.slideshow){var c=function(){a.slideshowTimeoutId=setTimeout(function(){a.next(c)},1E3*b.slideshow.delay+2E3)};a.slideshow=!0;setTimeout(function(){a.next(c)},1E3*b.slideshow.delay)}};I.prototype.slideshowStop=function(){if(this.slideshow)this.slideshow=!1,clearTimeout(this.slideshowTimeoutId)};
N.prototype.render=function(c){var d=this,o=this.canvas,p=this.items,f=this.settings;if(c===b)c=d.page;o.element.empty();var e=o.width(),h=o.height(),n=parseInt(f.thumbnail.width),x=parseInt(f.thumbnail.height),g=Math.floor((e-40)/n);1>g&&(g=1);var m=Math.floor((h-40)/x);1>m&&(m=1);c=Math.ceil(p.length/g);m>c&&(m=c);var w=g*m,u=d.pagesCount=Math.ceil(p.length/w),k=Math.floor(f.thumbnail.width)+2,q=Math.floor(f.thumbnail.height)+2,R=Math.floor((e-k*g)/2-8),M=Math.floor((h-q*m)/2-8),r=d.pageWidth=k*
g,c=d.pageHeight=q*m,s=a('<div class="altgallery-frame" />'),h={position:"absolute",left:R,top:M,width:Math.floor(e-2*(R+8))+14,height:Math.floor(h-2*(M+8))+14,background:B(f.colorScheme.thumbsFrameColor),"-moz-border-radius":"4px","-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};f.colorScheme.useShadow&&(h=a.extend(h,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));
s.css(h);o.element.append(s);e=a('<div class="altgallery-frameMask" />');h.background="#000";h.opacity=0.6;h.zIndex=20;h["-moz-box-shadow"]="none";h["-webkit-box-shadow"]="none";h["-khtml-box-shadow"]="none";h.boxShadow="none";e.css(h).hide();o.element.append(e);o=a("<div />");o.css({position:"absolute",left:8,top:8,width:r-2,height:c-2,overflow:"hidden"});var D=d.imagesContainer=a("<div />");D.css({position:"relative",left:0,top:0,width:k*g*u-2,height:q*m-2});o.append(D);s.append(o);d.drag=!1;var W=
0;D.draggable({axis:"x",distance:30,start:function(a,b){W=b.position.left;d.drag=!0},stop:function(a,b){30<Math.abs(Math.abs(W)-Math.abs(b.position.left))?W<b.position.left?d.prevPage():d.nextPage():d.placePage();setTimeout(function(){d.drag=!1},100)}});L(D);for(o=0;o<p.length;o++)u=o%g*k+Math.floor(o/w)*r,e=Math.floor(o/g)%m*q,function(b,c,o){var t=a("<img />"),h=a("<a />");h.attr({href:p[b].source}).css({display:"block",position:"absolute",left:Math.floor(c),top:Math.floor(o+0.5*x),width:n,height:x,
overflow:"hidden",opacity:0,background:B(f.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});D.append(h);var e=function(){h.click(function(){if(!d.drag)d.currentItem=b,d.open(p[b],{left:b%g*k+R,top:o+M});return!1}).mouseover(function(){t.stop().animate({opacity:1},v.animation.duration/2)}).mouseleave(function(){t.stop().animate({opacity:f.thumbnail.alpha/100},v.animation.duration/2)})};b<w?setTimeout(function(){h.animate({top:o,opacity:1},{duration:v.animation.duration,
complete:e})},200*b):(h.css({top:o,opacity:1}),e());C(p[b].thumb,function(a){t.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:f.thumbnail.alpha/100}).css(G.fill(a.width,a.height,parseInt(f.thumbnail.width),parseInt(f.thumbnail.height)));h.append(t)},200*b)}(o,u,e);m=d.prevPageButton=a("<div />");m.css({position:"absolute",left:5,top:c/2-10,width:30,height:30,background:z(v.images.folder+"/left.png"),cursor:"pointer"});y(m,{borderRadius:"4px"});
m.click(function(){d.prevPage()});s.append(m);m=d.nextPageButton=a("<div />");m.css({position:"absolute",right:5,top:c/2-10,width:30,height:30,background:z(v.images.folder+"/right.png"),cursor:"pointer"});y(m,{borderRadius:"4px"});m.click(function(){d.nextPage()});s.append(m);s.mouseover(function(){d.showControls()});s.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};N.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};N.prototype.showControls=
function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};N.prototype.open=function(c,d){var o=this,p=this.settings,f=a('<img class="altgallery-preloader" src="'+v.images.loader+'" alt="" />');m(f);f.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var e=a('<img src="'+c.thumb+'" />');C(c.thumb,function(h){a(".altgallery-imageFrame",o.canvas.element).remove();a(".altgallery-frameMask",o.canvas.element).fadeIn(v.animation.duration);
var n=document.createElement("div");a(n).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:B(p.colorScheme.imageBGColor),zIndex:30});a(n).hide();var g=G.fit(h.width,h.height,o.canvas.width()-48,o.canvas.height()-48),m={left:g.left+16+g.width/3,top:g.top+16+g.height/3,width:g.width/3,height:g.height/3};if(d!==b){if(d.left!==b)m.left=d.left;if(d.top!==b)m.top=d.top}a(n).css(m);var h=G.fit(h.width,h.height,o.canvas.width()-48,o.canvas.height()-48),k={left:h.left+16+h.width/
3,top:h.top+16+h.height/3,width:h.width/3,height:h.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};e.css(k);a(n).append(e);o.canvas.element.append(n);e.animate(h,v.animation.duration);a(n).animate({opacity:"show",left:g.left+16,top:g.top+16,width:g.width,height:g.height},v.animation.duration,function(){var b=a('<div class="captionContainer"></div>');b.css({position:"absolute",left:8,top:8,width:g.width,height:g.height,overflow:"hidden",cursor:"pointer"});
a(n).append(b);if(c.description){var d=parseInt(p.imageCaption.fontSize),d=d||o.defaultSettings.imageCaption.fontSize,l=a("<div><div>"+c.description+"</div></div>");l.css({position:"absolute",left:0,width:g.width,fontFamily:p.imageCaption.fontName,fontSize:d+"px",lineHeight:1.25,color:B(p.imageCaption.color),background:s(p.imageCaption.bgColor,p.imageCaption.bgAlpha/100)});b.append(l);"bottom"==p.imageCaption.position.toLowerCase()?(l.css({bottom:"-33px",borderTop:"1px solid "+s(p.imageCaption.bgColor,
(p.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"8px 10px 10px"}),l.animate({bottom:0})):(l.css({top:"-33px",borderBottom:"1px solid "+s(p.imageCaption.bgColor,(p.imageCaption.bgAlpha+10)/100)}),l.children("div").css({padding:"10px 10px 8px"}),l.animate({top:0}))}var h=a('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');h.css({backgroundImage:z(v.images.close)});
h.click(function(){a(this).remove();l&&l.remove();m.opacity="hide";a(n).animate(m,v.animation.duration,function(){a(this).remove()});e.animate(k,v.animation.duration);a(".altgallery-frameMask",o.canvas.element).fadeOut(v.animation.duration)});a(n).append(h);b.click(function(){h.remove();l&&l.remove();m.opacity="hide";a(n).animate(m,v.animation.duration,function(){a(this).remove();o.next()});e.animate(k,v.animation.duration)});setTimeout(function(){a(n).append(f)},500)})});C(c.source,function(){f.hide();
o.canvas.element.find(".altgallery-preloader").remove();a(e).attr("src",c.source)})};N.prototype.prev=function(){this.currentItem--;if(0>this.currentItem)this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};N.prototype.next=function(){this.currentItem++;if(this.currentItem>=this.items.length)this.currentItem=0;this.open(this.getCurrentItem())};N.prototype.placePage=function(){var a=this;a.hideControls();a.imagesContainer.animate({left:-(a.page*a.pageWidth)},{duration:v.animation.duration,
complete:function(){a.showControls()}})};N.prototype.prevPage=function(){this.page--;if(0>this.page)this.page=0;this.placePage()};N.prototype.nextPage=function(){this.page++;if(this.page>=this.pagesCount)this.page=this.pagesCount-1;this.placePage()};F.prototype.init=function(){var a=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(a.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;
default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};F.prototype.initFrame=function(){var b=this.canvas,c=this.settings,d=this.frame=a("<div></div>"),p=b.width()-10,f=b.height()-10;d.css({position:"absolute",left:5,top:5,width:p,height:f,overflow:"hidden",background:B(c.buttons.bgColor)});y(d,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var e=this.content=a("<div></div>"),p=this.contentWidth=p-18,f=this.contentHeight=
f-43;e.css({position:"absolute",left:9,top:9,width:p,height:f,background:B(c.base.color)});y(e,{borderRadius:"4px"});d.append(e);c=this.preloader=a('<img alt="" />');c.attr("src",v.images.loader);c.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});e.append(c);b.append(d)};F.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};F.prototype.initPrevButton=function(){var b=this.settings,c=a("<div></div>");c.css({position:"absolute",left:0,
top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:B(b.buttons.bgColor),cursor:"default"});y(c,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);prevOverlay=a("<div></div>");prevOverlay.css({position:"absolute",left:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:B(b.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var d=this.prevButton=a('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+
v.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');d.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var p;this.canvas.element.hover(function(){clearTimeout(p);c.stop().show().css({opacity:1}).animate({left:0});d.stop().animate({left:0,opacity:1})},function(){p=setTimeout(function(){c.stop().animate({left:-12},function(){c.fadeOut()});d.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=
function(){c.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showPrevButton=function(){c.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};F.prototype.initNextButton=function(){var b=this.settings,c=a("<div></div>");c.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:B(b.buttons.bgColor),cursor:"default"});y(c,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});
this.frame.append(c);nextOverlay=a("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:B(b.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var d=this.nextButton=a('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+v.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');d.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,
cursor:"pointer"});this.frame.append(d);var p;this.canvas.element.hover(function(){clearTimeout(p);c.stop().show().css({opacity:1}).animate({right:0});d.stop().animate({right:0,opacity:1})},function(){p=setTimeout(function(){c.stop().animate({right:-12},function(){c.fadeOut()});d.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=function(){c.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showNextButton=function(){c.css({visibility:"visible"});
nextOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};F.prototype.initCaption=function(){var b=this.caption=a("<div></div>");b.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"11px",color:"#777"});this.frame.append(b)};F.prototype.initButtons=function(){var b=this,c=b.settings,d=function(){a(this).css({borderColor:"#fff #bbb #bbb #fff"});y(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},p=
function(){a(this).css({borderColor:"transparent"});y(this,{boxShadow:"none"})};if(c.buttons.showSlideshowButton){var f=b.slideshowButton=a("<div></div>");f.css({position:"absolute",right:c.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:z(v.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",cursor:"pointer"});y(f,{borderRadius:"3px 4px 3px 4px"});f.hover(d,p);f.click(function(){b.showImage();b.slideshowStart()});b.frame.append(f)}if(c.buttons.showThumbnailsButton)c=
b.showThumbnailsButton=a("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:z(v.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,p),c.click(function(){b.showThumbnails()}),b.frame.append(c),c=b.showImagesButton=a("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:z(v.images.folder+"cubic-buttons.png")+
" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,p),c.click(function(){b.showImage()}),b.frame.append(c)};F.prototype.initImage=function(){var b=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame,c=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame,d=this.imagesFrame=a("<div></div>");d.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,
width:b,height:c,overflow:"hidden"}).hide();y(d,{borderRadius:"3px"});this.content.append(d);b=this.imagesContainer=a("<div></div>");b.css({position:"relative",left:0,top:0});d.append(b)};F.prototype.showImage=function(a){var b=this,c=function(){function a(){setTimeout(function(){b.drag=!1},100)}b.cleanup();b.thumbnailsFrame.hide();b.imagesFrame.show();b.showImagesButton.hide();b.showThumbnailsButton.show();b.showPrevButton();b.showNextButton();b.prevButton.unbind("click").click(function(){b.slideshowStop();
b.prev()});b.nextButton.unbind("click").click(function(){b.slideshowStop();b.next()});var c=0;b.imagesContainer.draggable({axis:"x",distance:30,start:function(a,d){b.drag=!0;c=d.position.left},stop:function(d,o){30<Math.abs(Math.abs(c)-Math.abs(o.position.left))?c<o.position.left?b.prev(v.animation.duration,a):b.next(v.animation.duration,a):b.place(v.animation.duration,a)}});b.imagesContainer.unbind("dblclick").dblclick(function(){b.showThumbnails()});L(b.imagesContainer)};!1!==a?(b.hidePrevButton(),
b.hideNextButton(),b.open(b.getCurrentItem(),c)):c()};F.prototype.initThumbnails=function(){function b(){c.cleanup()}var c=this,d=c.canvas,p=c.thumbnailsWidth=c.contentWidth-2*c.settings.base.visibleFrame,f=c.thumbnailsHeight=c.contentHeight-2*c.settings.base.visibleFrame,e=c.thumbnailsFrame=a("<div></div>");e.css({position:"absolute",left:c.settings.base.visibleFrame,top:c.settings.base.visibleFrame,width:p,height:f,overflow:"hidden"}).hide();y(e,{borderRadius:"3px"});c.content.append(e);var h=c.thumbnailsContainer=
a('<div class="thumbnailsContainer"></div>');h.css({position:"relative",left:0,top:0,width:p*Math.ceil(c.items.length/20),height:f});e.append(h);for(var n=Math.round((p-5)/5),g=Math.round((f-4)/4),k=Math.round((p-5*n)/10),q=Math.round((f-4*g)/8),f=0;f<c.items.length;f++)(function(f,e){C(e.thumb,function(A){var r=f%5,R=Math.floor(f%20/5),M=a('<a class="altgallery-thumbnail altgallery-thumbnail-'+f+'"></a>');m(M);M.attr({href:e.source}).css({display:"block",position:"absolute",left:r*n+Math.floor(f/
20)*p+1*r+k,top:R*g+1*R+q,width:n,height:g,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(f%20/5)});y(M,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});M.mouseover(function(){if(c.enableThumbnailsHover&&!c.drag){var m=0;0==r?m=n/8:4==r&&(m=-n/8);var k=0;0==R?k=g/8:3==R&&(k=-g/8);c.updateCaption(e.description||"Image "+(f+1)+" / "+c.items.length);c.cleanup();d.element.find(".altgallery-thumbnail").css({opacity:0.8});var q=a(this).clone();q.addClass("altgallery-clone");q.css({left:a(this).offset().left-
h.offset().left,top:a(this).offset().top-h.offset().top,zIndex:10,opacity:1});y(q,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});h.append(q);var v=q.find("img");q.animate({width:1.25*n,height:1.25*g,marginLeft:-n/8+m,marginTop:-g/8+k},{duration:"fast",easing:"linear",step:function(){v.css(G.fill(A.width,A.height,q.width(),q.height()))}});q.click(function(){if(!c.drag)c.currentItem=f,q.unbind("mouseleave"),c.canvas.element.unbind("mouseleave",b),y(q,{boxShadow:"none"}),q.animate({left:c.currentPage*
p,top:0,width:c.imageWidth,height:c.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){v.css(G.fill(A.width,A.height,q.width(),q.height()))},complete:function(){c.showImage()}});return!1});q.mouseleave(function(){c.cleanup();c.updateCaption(" ")})}});M.click(function(){if(!c.drag)c.currentItem=f,c.showImage();return!1});var v=a("<img />");v.attr({src:e.thumb}).css({display:"block",position:"absolute",border:"none"}).css(G.fill(A.width,A.height,n,g));M.append(v);h.append(M)})})(f,
c.items[f]);c.canvas.element.mouseleave(b);c.currentPage=0;c.preloader.hide()};F.prototype.showThumbnails=function(){function a(b,c){f.thumbnailsContainer.stop().animate({left:-f.currentPage*f.thumbnailsWidth},{duration:b||2*v.animation.duration,complete:function(){f.enableThumbnailsHover=!0;"function"==typeof c&&c()}})}function b(c,d){if(0<f.currentPage)f.currentPage--,f.enableThumbnailsHover=!1,f.cleanup();a(c,d);f.updateNavigation()}function c(b,d){if(f.currentPage<Math.ceil(f.items.length/20)-
1)f.currentPage++,f.enableThumbnailsHover=!1,f.cleanup();a(b,d);f.updateNavigation()}function d(){setTimeout(function(){f.drag=!1},100)}var f=this;f.slideshow&&f.slideshowStop();f.updateCaption(" ");f.imagesFrame.hide();f.thumbnailsFrame.show();f.showThumbnailsButton.hide();f.showImagesButton.show();f.prevButton.unbind("click").click(function(){b()});f.nextButton.unbind("click").click(function(){c()});f.updateNavigation();var e=0;f.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(a,
b){f.drag=!0;e=b.position.left;f.cleanup()},stop:function(f,n){30<Math.abs(Math.abs(e)-Math.abs(n.position.left))?e<n.position.left?b(v.animation.duration,d):c(v.animation.duration,d):a(v.animation.duration,d)}});L(f.thumbnailsContainer)};F.prototype.updateNavigation=function(){var a=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():this.hidePrevButton();this.currentPage<a-1?this.showNextButton():this.hideNextButton()};F.prototype.updateCaption=function(a){(a=a||this.getCurrentItem().description)?
this.caption.html(a):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};F.prototype.loadImage=function(c,d){var o=this,c=c%o.items.length;o.items[c]!==b&&C(o.items[c].source,function(b){var f="altgallery-image-"+c;if(!o.imagesContainer.find("."+f).size()){f=a('<div class="'+f+'"></div>');f.css({position:"absolute",left:o.imageWidth*c,top:0,width:o.imageWidth,height:o.imageHeight,overflow:"hidden"});var e=a('<img style="position:absolute;" />');e.attr("src",b.src);e.css(G.fill(b.width,
b.height,o.imageWidth,o.imageHeight));f.append(e);o.imagesContainer.append(f)}"function"==typeof d&&d(b)})};F.prototype.open=function(b,c){var d=this,p="altgallery-image-"+d.currentItem;d.imagesContainer.find("."+p).size()?"function"==typeof c&&c():(d.preloader.show(),C(b.source,function(b){var e=a('<div class="'+p+'"></div>');e.css({position:"absolute",left:d.imageWidth*d.currentItem,top:0,width:d.imageWidth,height:d.imageHeight,overflow:"hidden"});var h=a('<img style="position:absolute;" />');h.attr("src",
b.src);h.css(G.fill(b.width,b.height,d.imageWidth,d.imageHeight));e.append(h);d.imagesContainer.append(e);d.preloader.hide();"function"==typeof c&&c()}));d.imagesContainer.stop().css({left:-d.imageWidth*d.currentItem});d.updateCaption();d.loadImage(b.id+1);d.loadImage(b.id-1)};F.prototype.place=function(a,b){this.imagesContainer.stop().animate({left:-this.imageWidth*this.currentItem},{duration:a||2*v.animation.duration,complete:function(){"function"==typeof b&&b()}})};F.prototype.prev=function(a,
b){var c=this;if(0<c.currentItem){c.currentItem--;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(a,b);c.updateCaption();c.loadImage(c.currentItem-1)})}else c.currentItem=c.items.length-1,c.showImage()};F.prototype.next=function(a,b){var c=this;if(c.currentItem<c.items.length-1){c.currentItem++;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();
c.place(a,function(){c.slideshow&&c.slideshowStart();"function"==typeof b&&b()});c.updateCaption();c.loadImage(c.currentItem+1)})}else c.currentItem=0,c.showImage(),c.slideshow&&c.slideshowStart()};F.prototype.slideshowStart=function(){var a=this;a.showImage(!1);clearTimeout(a.slideshowTimer);a.slideshow=!0;a.slideshowButton.css({background:z(v.images.folder+"cubic-buttons.png")+" no-repeat 0px -76px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStop()});a.slideshowTimer=setTimeout(function(){a.next()},
1E3*a.settings.slideshowDelay)};F.prototype.slideshowStop=function(){var a=this;a.slideshow=!1;clearTimeout(a.slideshowTimer);a.slideshowButton.css({background:z(v.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStart()})};F.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();a(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};Q.prototype.showScrollbar=function(){var b=this,
c=this.settings,d=this.canvas,p=a('<div class="altgallery-scrollbar"></div>'),f=Math.round(0.8*d.width())-36;p.css({position:"absolute",zIndex:1E3,left:(d.width()-f)/2,bottom:5,width:f+36,height:17,background:s(c.scrollbar.bgColor,c.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(a.browser.msie&&9>a.browser.version){var e=sprintf("%02x%s",255*c.scrollbar.bgAlpha/100,B(c.scrollbar.bgColor).replace("#",""));p.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
e+",endColorstr=#"+e+")"})}var h=a('<div class="altgallery-scrollbar-handle"></div>'),n=f/b.items.length;h.css({position:"absolute",left:Math.round(b.currentItem*n),top:-10,width:Math.floor(n),height:30});var g=a("<div />");g.css({position:"relative",top:10,height:13,background:B(c.scrollbar.handleColor),opacity:c.scrollbar.handleAlpha/100,cursor:"ew-resize"});g.hover(function(){g.css({opacity:1})},function(){g.css({opacity:c.scrollbar.handleAlpha/100})});h.append(g);h.draggable({axis:"x",containment:"parent",
stop:function(a,c){b.currentItem=Math.floor(c.position.left/f*b.items.length);h.css({left:Math.round(b.currentItem*n)});b.animate()}});e=a("<div></div>");e.css({position:"relative",top:2,height:13,margin:"0 18px"});e.click(function(c){c=c.pageX-a(this).offset().left;b.currentItem=Math.floor(c/f*b.items.length);h.css({left:Math.round(b.currentItem*n)});b.animate()});var m={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",
color:B(c.scrollbar.arrowsColor),opacity:c.scrollbar.arrowsAlpha/100,cursor:"pointer"},k=a("<div>&#9668;</div>");k.css(m);k.css({left:1});k.click(function(){b.prev()});p.append(k);k=a("<div>&#9658;</div>");k.css(m);k.css({right:1});k.click(function(){b.next()});p.append(k);e.append(h);p.append(e);d.element.append(p);L(h)};Q.prototype.updateScrollbar=function(){var a=this.canvas,b=(Math.round(0.8*a.width())-36)/this.items.length;a.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*
b)})};Q.prototype.getItemStyle=function(a,b){var c=this.settings,d=this.canvas,f,e;f=this.getItemX(b);e=this.getItemZ(b);var h;h=Math.abs(f);var n=G.fit(a.width,a.height,c.maxImageWidth*(1>h?1:2>h?0.55:3>h?0.5:0.6-0.05*h),d.height()-60);return{zIndex:10*e,left:(d.width()-n.width)/2+f*d.width()/8+(f?f/h*c.maxImageWidth/3:0),top:(d.height()-n.height)/2-30,width:n.width,height:n.height,opacity:f?0.8:1,transform:{rotateY:-(f?f/h:0)*c.imageAngle+"deg"}}};Q.prototype.render=function(){function b(c,n){C(f[c].source,
function(b){var h=d.getItemStyle(b,c),k=a('<a class="altgallery-item-'+c+'"></a>');f[c].link&&(k.attr("href",f[c].link),f[c].target&&k.attr("target",f[c].target));k.css({display:"block",position:"absolute",zIndex:h.zIndex,left:h.left,top:h.top,width:h.width,height:h.height,overflow:"visible",background:"#000",cursor:"pointer",outline:"none"});g&&q(k,{rotateY:h.transform.rotateY});var t=a('<img src="" alt="" />');t.attr("src",b.src);m(t);t.css({display:"block",width:h.width,height:h.height,opacity:h.opacity});
k.append(t);if(d.showReflections){b=t.clone();b.css({position:"absolute",opacity:e.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var x=a('<div class="altgallery-overlay"></div>');x.css({position:"absolute",top:h.height,width:h.width,height:h.height,background:p.element.css("backgroundColor"),zIndex:0});var w=a('<div class="altgallery-overlay"></div>');w.css({position:"absolute",
top:h.height,width:h.width,height:h.height,zIndex:2});var h=p.element.css("backgroundColor"),r=[s(h,0),s(h,0.5),s(h,1)];a.browser.mozilla?w.css({background:"-moz-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"}):a.browser.webkit?w.css({background:"-webkit-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"}):a.browser.opera?w.css({background:"-o-linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"}):a.browser.msie?(h=B(h).replace("#",""),w.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+
h+",endColorstr=#ff"+h+",GradientType=0)"})):w.css({background:"linear-gradient(top, "+r[0]+" 0%, "+r[1]+" 15%, "+r[2]+" 50%)"});k.append(b);k.append(x);k.append(w)}k.click(function(){if(!d.drag){d.currentItem+=n;if(0>d.currentItem)d.currentItem=0;else if(d.currentItem>=f.length)d.currentItem=f.length-1;d.animate()}return!1}).hover(function(){t.css({opacity:1})},function(){t.css({opacity:n?0.8:1})});c==d.currentItem&&k.unbind("click").click(function(){if(d.drag)return!1});d.scene.append(k)})}var d=
this,e=this.settings,p=this.canvas,f=this.items,g=!c();d.scene.empty();d.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var h,n,k,r,v,w=0;r=d.currentItem;v=2*Math.max(r,f.length-r);for(n=1;n<=v;n++)h=r+(n%2?parseInt(n/2):-parseInt(n/2)),0<=h&&h<f.length&&function(a){setTimeout(function(){k=d.getItemX(a);b(a,k)},100*w++)}(h);e.useScrollBar&&d.showScrollbar();a.browser.mozilla&&d.showReflections&&d.animate()};Q.prototype.animate=function(){function a(c,e,h){C(p[c].source,
function(a){function n(a){function c(b){return k[b]+(t[b]-k[b])*a/1E4}g.css({left:c("left"),top:c("top"),zIndex:parseInt(c("zIndex")),width:c("width"),height:c("height")});m.css({width:c("width"),height:c("height")});b.showReflections&&x.css({top:c("height"),width:c("width"),height:c("height")});f&&q(g,{rotateY:parseFloat(k.transform.rotateY)+(parseFloat(t.transform.rotateY)-parseFloat(k.transform.rotateY))*a/1E4+"deg"})}var g=b.scene.find(".altgallery-item-"+c),m=g.find("img"),k={left:parseInt(g.css("left")),
top:parseInt(g.css("top")),zIndex:parseInt(g.css("z-index")),width:g.width(),height:g.height(),opacity:g.find("img").css("opacity"),transform:q(g)},t=b.getItemStyle(a,c);h||g.show();g.unbind("click").click(function(){if(!b.drag){b.currentItem+=e;if(0>b.currentItem)b.currentItem=0;else if(b.currentItem>=p.length)b.currentItem=p.length-1;b.animate()}return!1}).unbind("hover").hover(function(){m.first().css({opacity:1})},function(){m.first().css({opacity:e?0.8:1})});m.first().css({opacity:t.opacity});
var x=g.find(".altgallery-overlay");g.stop().prop("animate",0);h?n(1E4):g.animate({animate:1E4},{duration:500*d.flipDuration,easing:"linear",step:function(a){n(a)},complete:function(){g.prop("animate",0);c==b.currentItem&&g.unbind("click").click(function(){if(b.drag)return!1})}})})}var b=this,d=this.settings,p=this.items,f=!c(),e,h,n,g,m;g=b.currentItem;m=2*Math.max(g,p.length-g);for(h=1;h<=m;h++)if(e=g+(h%2?parseInt(h/2):-parseInt(h/2)),0<=e&&e<p.length){var k=Math.abs(b.currentItem-e);n=b.getItemX(e);
4>k?a(e,n):(b.scene.find(".altgallery-item-"+e).hide(),a(e,n,!0))}d.useScrollBar&&b.updateScrollbar()};Q.prototype.open=function(a){this.currentItem=a.id;this.animate()};Q.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=0);if(this.currentItem!=a)this.currentItem=a,this.animate()};Q.prototype.next=function(a){a=this.currentItem+(a||1);a>=this.items.length&&(a=this.items.length-1);if(this.currentItem!=a)this.currentItem=a,this.animate()};J.prototype.render=function(){var b=this,c=this.settings,
d=this.canvas;d.element.css({fontFamily:c.fontName,fontSize:parseInt(c.fontSize)+"px",lineHeight:1.2*parseInt(c.fontSize)+"px"});(function(){var p=a('<div class="altgallery-imageFrame"></div>');p.css({width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,padding:c.frameSize,background:B(c.frameColor),borderRadius:c.cornerRadius/2});var f=a('<div class="altgallery-image"></div>');f.css({position:"relative",width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,overflow:"hidden",background:B(c.backgroundColor),
borderRadius:c.cornerRadius/2-c.frameSize/4,cursor:"pointer"});var e=a('<img src="" alt="" />');m(f.children("img"));e.css({position:"absolute"});p.click(function(){b.next()});f.append(e);p.append(f);d.element.append(p);b.open(b.getCurrentItem())})();switch(c.initialState.toLowerCase()){default:case "show albums":this.showAlbums();break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};J.prototype.showAlbums=function(){function b(){function f(){var a=w*q+1,b=
w*q+q;if(b>c.albums.length)b=c.albums.length;r.html(a+"-"+b+" "+e.translation.Of+" "+c.albums.length);0>=w?(y.css({opacity:0.3,cursor:"default"}),y.unbind("click").click(function(){return!1})):(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(B));w>=t-1?(D.css({opacity:0.3,cursor:"default"}),D.unbind("click").click(function(){return!1})):(D.css({opacity:1,cursor:"pointer"}),D.unbind("click").click(E))}c.hideThumbnails();c.hideButtons();c.hideCaption();c.hideNavigation();var g=a('<div class="altgallery-albums"></div>'),
h=d.width()-2*e.frameSize,n=e.iconHeight+115;g.css({position:"absolute",left:e.frameSize,top:(d.height()-n)/2,width:d.width()-2*e.frameSize,height:n,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var k=a('<div class="altgallery-albums-overlay"></div>');k.css({position:"absolute",left:e.frameSize,top:(d.height()-n)/2,width:d.width()-2*e.frameSize,height:n+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(k);n=a("<div></div>");n.css({position:"absolute",
top:10,right:20});k=a('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");k.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:z(v.images.folder+"zen-close.png"),paddingLeft:12});k.click(function(){c.hideAlbums();c.showButtons();c.showCaption();c.showNavigation();return!1});n.append(k);g.append(n);var q=Math.floor((h-20)/(e.iconWidth+e.iconPadding)),q=q>c.albums.length?c.albums.length:
q,n=(e.iconWidth+e.iconPadding)*q-e.iconPadding,k=(e.iconWidth+e.iconPadding)*c.albums.length-e.iconPadding,t=Math.ceil(c.albums.length/q),w=0,u=a("<div>"+e.translation.Albums+"</div>");u.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:z(v.images.folder+"zen-albums.png")});g.append(u);var r=a("<span></span>");r.css({marginLeft:"1em",fontWeight:"normal"});u.append(r);u=a("<div></div>");
u.css({position:"absolute",left:(h-n)/2-4,top:42,width:n+4,height:e.iconHeight+70,overflow:"hidden"});var s=a("<div></div>");s.css({position:"relative",left:0,width:k});u.append(s);h=a("<div></div>");h.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var y=a('<a href="#" style="float:left;"></a>');y.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-prev.png")});var B=function(){0<w&&w--;var a=
(e.iconWidth+e.iconPadding)*q*w;s.stop().animate({left:-a},2*v.animation.duration,"easeOutQuart");f();return!1};y.click(B);h.append(y);g.append(u);var D=a('<a href="#" style="float:left;"></a>');D.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-next.png")});var E=function(){w<t-1&&w++;var a=(e.iconWidth+e.iconPadding)*q*w;s.stop().animate({left:-a},2*v.animation.duration,"easeOutQuart");f();return!1};D.click(E);
h.append(D);g.append(h);f();for(var F,h=0;h<c.albums.length;h++)(function(b,d){var f=a("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var h=a('<div class="altgallery-thumbnail"></div>');h.css({position:"relative",width:e.iconWidth-2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentAlbum==d?"#000":"#fff",margin:"2px",cursor:"pointer"});C(b.items[0].thumb,
function(b){var c=a('<img src="" alt="" />');c.attr("src",b.src);m(c);c.css({position:"absolute"});c.css(G.fill(b.width,b.height,e.iconWidth-2,e.iconHeight-2));h.append(c)},50*d);f.append(h);f.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(b.description||"Album "+(d+1))+"<div>");f.append('<div style="padding:1px 2px;">'+b.items.length+" "+(1==b.items.length?e.translation.Image:e.translation.Images)+"<div>");f.hover(function(){s.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});h.css({borderWidth:"3px",margin:"0px"})},function(){h.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!F){if(c.currentAlbum!=d)c.currentItem=-1;c.currentAlbum=d;c.showThumbnails()}});s.append(f)})(c.albums[h],h);d.element.append(g);1<t&&(s.draggable({axis:"x",start:function(){F=!0},stop:function(a,b){b.position.left>b.originalPosition.left?B():E();setTimeout(function(){F=!1},100)}}),L(g))}var c=this,d=this.canvas,e=this.settings;d.element.find(".altgallery-albums").size()||
b()};J.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};J.prototype.showThumbnails=function(){function b(){function g(){var a=u*t+1,b=u*t+t;if(b>f.items.length)b=f.items.length;s.html(a+"-"+b+" "+e.translation.Of+" "+f.items.length);0>=u?(B.css({opacity:0.3,cursor:"default"}),B.unbind("click").click(function(){return!1})):(B.css({opacity:1,cursor:"pointer"}),B.unbind("click").click(D));u>=w-1?(E.css({opacity:0.3,cursor:"default"}),
E.unbind("click").click(function(){return!1})):(E.css({opacity:1,cursor:"pointer"}),E.unbind("click").click(F))}c.hideAlbums();c.hideButtons();c.hideCaption();c.hideNavigation();var h=a('<div class="altgallery-images"></div>'),n=d.width()-2*e.frameSize,k=e.iconHeight+75;h.css({position:"absolute",left:e.frameSize,top:(d.height()-k)/2,width:d.width()-2*e.frameSize,height:k,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var q=a('<div class="altgallery-images-overlay"></div>');
q.css({position:"absolute",left:e.frameSize,top:(d.height()-k)/2,width:d.width()-2*e.frameSize,height:k+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(q);k=a("<div></div>");k.css({position:"absolute",top:10,right:20});1<c.albums.length&&(q=a('<a class="altgallery-back" href="#">'+e.translation.BackToAlbums+"</a>"),q.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",
backgroundImage:z(v.images.folder+"zen-backToAlbums.png"),paddingLeft:14}),q.click(function(){c.showAlbums();return!1}),k.append(q));q=a('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");q.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:z(v.images.folder+"zen-close.png"),paddingLeft:12});q.click(function(){c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();
return!1});k.append(q);h.append(k);var t=Math.floor((n-20)/(e.iconWidth+e.iconPadding)),t=t>f.items.length?f.items.length:t,k=(e.iconWidth+e.iconPadding)*t-e.iconPadding,q=(e.iconWidth+e.iconPadding)*f.items.length-e.iconPadding,w=Math.ceil(f.items.length/t),u=0,r=a("<div>"+e.translation.Images+"</div>");r.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:z(v.images.folder+
"zen-thumbnails.png")});h.append(r);var s=a("<span></span>");s.css({marginLeft:"1em",fontWeight:"normal"});r.append(s);r=a("<div></div>");r.css({position:"absolute",left:(n-k)/2-4,top:42,width:k+4,height:e.iconHeight+4,overflow:"hidden"});var y=a("<div></div>");y.css({position:"relative",left:0,width:q});r.append(y);h.append(r);n=a("<div></div>");n.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var B=a('<a href="#" style="float:left;"></a>');B.css({display:"block",cssFloat:"left",
width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-prev.png")});var D=function(){0<u&&u--;var a=(e.iconWidth+e.iconPadding)*t*u;y.stop().animate({left:-a},2*v.animation.duration,"easeOutQuart");g();return!1};B.click(D);n.append(B);var E=a('<a href="#" style="float:left;"></a>');E.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-next.png")});var F=function(){u<
w-1&&u++;var a=(e.iconWidth+e.iconPadding)*t*u;y.stop().animate({left:-a},2*v.animation.duration,"easeOutQuart");g();return!1};E.click(F);n.append(E);h.append(n);g();for(var H=!1,n=0;n<f.items.length;n++)(function(b,d){var f=a("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var h=a('<div class="altgallery-thumbnail"></div>');h.css({position:"relative",width:e.iconWidth-
2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentItem==d?"#000":"#fff",margin:"2px",cursor:"pointer"});C(b.thumb,function(b){var c=a('<img src="" alt="" />');c.attr("src",b.src);m(c);c.css({position:"absolute"});c.css(G.fill(b.width,b.height,e.iconWidth-2,e.iconHeight-2));h.append(c)},50*d);f.append(h);f.hover(function(){y.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});h.css({borderWidth:"3px",margin:"0px"})},function(){h.css({borderWidth:"1px",
margin:"2px"})}).click(function(){if(!H)c.currentItem=d,c.open(c.getCurrentItem())});y.append(f)})(f.items[n],n);d.element.append(h);1<w&&(y.draggable({axis:"x",start:function(){H=!0},stop:function(a,b){b.position.left>b.originalPosition.left?D():F();setTimeout(function(){H=!1},100)}}),L(h))}var c=this,d=this.canvas,e=this.settings,f=this.getCurrentAlbum();d.element.find(".altgallery-images").size()||b()};J.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};
J.prototype.showButtons=function(){function b(){var d=a('<div class="altgallery-buttons"></div>');d.css({position:"absolute",right:c.settings.frameSize,top:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px",
"border-bottom-left-radius":"3px"});if(a.browser.msie&&9>a.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showAlbumsButton&&1<c.albums.length&&(e=a('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",
backgroundImage:z(v.images.folder+"zen-albums.png"),opacity:0.8}),e.click(function(){c.showAlbums();return!1}),d.append(e));c.settings.showThumbnailsButton&&(e=a('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-thumbnails.png"),opacity:0.8}),e.click(function(){c.showThumbnails();return!1}),d.append(e));c.canvas.element.append(d)}var c=this;if("never"!=c.settings.showButtons.toLowerCase()&&
(c.settings.showAlbumsButton||c.settings.showThumbnailsButton))c.canvas.element.find(".altgallery-buttons").size()||b()};J.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};J.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&this.getCurrentItem().description)){var b=a('<div class="altgallery-caption"></div>');b.css({position:"absolute",
left:this.settings.frameSize,top:25+this.settings.frameSize,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px","-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});
if(a.browser.msie&&9>a.browser.version){var c=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),c=16>c?"0"+c.toString(16):c.toString(16);b.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+"000000,endColorstr=#"+c+"000000)"})}this.getCurrentAlbum().description&&b.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description+"</div>");this.getCurrentItem().description&&b.append('<div style="">'+this.getCurrentItem().description+
"</div>");this.canvas.element.append(b)}};J.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};J.prototype.showNavigation=function(){function b(){var d=a('<div class="altgallery-navigation"></div>');d.css({position:"absolute",right:c.settings.frameSize,bottom:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px",
"-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(a.browser.msie&&9>a.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showNavigationButton&&
(e=a('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-prev.png"),opacity:0.8}),e.click(function(){c.prev();return!1}),d.append(e),e=a('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:z(v.images.folder+"zen-next.png"),opacity:0.8}),e.click(function(){c.next();
return!1}),d.append(e));c.canvas.element.append(d)}var c=this;"never"!=c.settings.showButtons.toLowerCase()&&c.settings.showNavigationButton&&(c.canvas.element.find(".altgallery-navigation").size()||b())};J.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};J.prototype.open=function(b){var c=this,d=this.canvas,e=this.settings;c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();d.element.find(".altgallery-image img").hide();
var f=d.element.find(".altgallery-imageFrame"),g=a('<img class="altgallery-preloader" src="'+v.images.loader+'" alt="" />');m(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});C(b.source,function(a){g.hide();d.element.find(".altgallery-preloader").remove();var f=d.element.find(".altgallery-image img");"fit"==e.imageScaleMode?f.css(G.fit(a.width,a.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize)):f.css(G.fill(a.width,a.height,d.width()-2*e.frameSize,d.height()-
2*e.frameSize));f.attr("src",b.source).fadeIn(2*v.animation.duration);c.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();f.append(g)},500)};J.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};J.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};var v={};a.altgallery=
altgallery=function(c,d,e){function g(){f.each(function(){ba(this,c,d)})}e===b&&"function"!=typeof d&&(e=d,d=b);var f;e===b?(window.altgallery_id++,e="altgallery-"+window.altgallery_id,document.write('<div id="'+e+'"></div>'),f=a(document.getElementById(e))):f=a(e);c=a.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:Z+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},config:{settings:{}}},c);if(c.images.folder){c.images.folder=
c.images.folder.replace(/\/+$/,"")+"/";for(var k in c.images)"folder"!=k&&!c.images[k].match("/")&&(c.images[k]=c.images.folder+c.images[k])}if("string"==typeof c.config){f.css({visibility:"hidden"});var h={load:function(a,c,d){if(c!==b)switch(c.toLowerCase()){case "xml":this.loadXML(a,d);break;default:case "json":this.loadJSON(a,d)}else a.match(/(xml)$/i)?this.loadXML(a,d):this.loadJSON(a,d)},loadJSON:function(b,c){a.ajax({url:b,dataType:"json",success:function(a){a=h.parse(a);"function"==typeof c&&
c(a)},error:function(){"function"==typeof c&&c({})}})},loadXML:function(b,c){function d(a){var b;"undefined"==typeof b&&(b=function(){});b.ObjTree=function(){return this};b.ObjTree.prototype.attr_prefix="";b.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&(b=[b]);if(11!=a.nodeType){var c={};c[a.nodeName]=b;b=c}return b}};
b.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&
e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=
d};b=new b.ObjTree;b.attr_prefix="";return b.parseDOM(a)["#document"]}a.ajax({url:b,dataType:"xml",success:function(a){a=d(a);a=h.parse(a);"function"==typeof c&&c(a)},error:function(){"function"==typeof c&&c({})}})},parse:function(a){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?a.albums.album:[a.albums.album];for(var b=0;b<
a.albums.length;b++)if(a.albums[b].items.item)a.albums[b].items=a.albums[b].items.item.length?a.albums[b].items.item:[a.albums[b].items.item]}}return a}};h.load(c.config,c.configType,function(a){f.css({visibility:"visible"});c.config=a;g()})}else g();return f};a.fn.altgallery=function(b,c){a.altgallery(b,c,this);return this};a.altbox=altbox=function(b,c){if(d!=top)var d=top,e=d.document;c=a.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:Z+"img/",close:"close.png",
loader:"loader.gif"},animation:{duration:700}},c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var f in c.images)"folder"!=f&&!c.images[f].match("/")&&(c.images[f]=c.images.folder+c.images[f])}var g=a('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');g.css({opacity:0,backgroundColor:c.mask.color,backgroundImage:z(c.images.loader)});a(e.body).append(g);g.animate({opacity:c.mask.opacity},c.animation.duration);
var h=new Image;h.onload=function(){function f(){g.remove();s.remove()}function k(){y.remove();r.opacity="hide";s.animate(r,0.67*c.animation.duration);v.animate({width:r.width-20,height:r.height-20},0.67*c.animation.duration);g.fadeOut(c.animation.duration,function(){f()});return!1}var m=a(d).width()-100,q=a(d).height()-100,r=G.fit(h.width/4,h.height/4,m,q,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;var u=G.fit(h.width+20,h.height+20,m,q,{noEnlarge:!0,minWidth:120,minHeight:120});
u.left+=50;u.top+=50;var s=a('<div style="position:fixed; z-index:1000;"></div>');s.css(r);s.css({backgroundColor:c.frame.color,borderRadius:c.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});s.hide();var v=a('<img src="'+b+'" alt="" style="display:block;" />');v.css({margin:"10px",width:r.width-20,height:r.height-20,borderRadius:8<c.frame.borderRadius?c.frame.borderRadius-8:0});var y=a('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');
y.css({backgroundImage:z(c.images.close)});s.append(v);a(e.body).append(s);(function(){g.css({backgroundImage:"none"});v.animate({width:u.width-20,height:u.height-20,margin:"10px"},c.animation.duration,"easeOutBack");u.opacity="show";s.animate(u,c.animation.duration,"easeOutBack",function(){s.append(y)})})();a(d).resize(function(){m=a(d).width()-100;q=a(d).height()-100;r=G.fit(h.width/4,h.height/4,m,q,{noEnlarge:!0,minWidth:100,minHeight:100});r.left+=50;r.top+=50;u=G.fit(h.width+20,h.height+20,m,
q,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;s.css(u);v.css({width:u.width-20,height:u.height-20})});g.click(f);y.click(k);s.dblclick(k)};h.src=b}})(jQuery);var flashgallery;
(function(a,b){window.flashgallery_id=window.flashgallery_id||0;a.flashgallery=flashgallery=function(d,c,r,m){var k;k="object"==typeof c?a.browser.msie?JSON.stringify({config:c}):{config:JSON.stringify(c)}:{configPath:c};r=a.extend({width:"550px",height:"400px",background:"transparent"},r);window.flashgallery_id++;var e="flashgallery-"+window.flashgallery_id;m==b?document.write('<div id="'+e+'"></div>'):a(m).html('<div id="'+e+'"></div>');m=a(document.getElementById(e));m.css({width:r.width,height:r.height,
overflow:"hidden"});var z={allowScriptAccess:"always",allowFullScreen:"true",wmode:"opaque",quality:"high"},B=r.background.match(/(#[0-9a-f]+)/i);B?z.bgcolor=B[1]:z.wmode="transparent";swfobject.embedSWF(d,e,r.width.toString().match(/^\d+%$/)?r.width:parseInt(r.width),r.height.toString().match(/^\d+%$/)?r.height:parseInt(r.height),"10.0.12.36","http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf",k,z,{style:"outline:none;"},function(b){b.success?a(b.ref).css({background:r.background}):
(r.config=c,m.altgallery(r))})};a.fn.flashgallery=a.fn.flashgallery||function(b,c,r){a.flashgallery(b,c,r,this)}})(jQuery);
